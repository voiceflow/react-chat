import{r as a,j as r,R as x,a as y}from"./jsx-runtime.36813a72.js";import{A as re}from"./index.bac2f8ad.js";import{K as F,c as W,u as w,T as d,i as ae,C as D,a as ie,S as N,b as k,U as ce,o as j,d as I,e as Y}from"./index.8adf4601.js";import{V as le}from"./fixtures.e9667a2d.js";import{b as de,t as A,C as P,s as p,a as pe}from"./theme.a6b21f3d.js";import"./index.484a71f2.js";import{L as U}from"./index.f1006a72.js";import{T as me}from"./index.51122816.js";import{I as z}from"./index.20654399.js";import{n as u}from"./index.2fccbc87.js";import"./index.a6cfc477.js";import"./index.786fa7d0.js";import{c as ue}from"./index.a9d7ffe8.js";import"./index.5017d348.js";import"./index.149c2c3f.js";import"./index.3bcfec8a.js";import"./index.ee9d3f19.js";import"./index.0de2a19b.js";import"./index.8ea309da.js";import"./index.4c0a3337.js";import"./iframe.0129ec0e.js";import"./index.e35457cc.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.b9bbced0.js";import"./variants.f4207eff.js";const G=e=>{const[t,n]=a.exports.useState("");return a.exports.useEffect(()=>{e!=null&&e.color&&n(de({color:e.color}))},[e==null?void 0:e.color]),t},he=A(P.PROACTIVE_CLOSE),f=p(he("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${z.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),X=({...e})=>r(f,{...e,children:r(z,{svg:"closeV2"})});try{f.displayName="CloseContainer",f.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:f.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const Ce=A(P.PROACTIVE_MESSAGE),S=p(Ce("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{S.displayName="MessageContainer",S.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:S.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const ge=A(P.PROACTIVE),b=p("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${S}`]:{...pe({duration:150,delay:0})}}),M=p(ge("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${f}`]:{opacity:0},["&:hover"]:{[`& ${f}`]:{opacity:1}}}),fe=({side:e,messages:t})=>{const[n,o]=x.useState(!1),i=x.useMemo(()=>t.map((h,C)=>F(h).with({type:me.TEXT},({payload:g})=>r(S,{children:String(g.message)},C)).otherwise(()=>null)),[t]);return x.useEffect(()=>{!i.length||o(!1)},[i]),n||!i.length?null:y(M,{style:{[e]:0,alignItems:e===W.ChatPosition.LEFT?"start":"end"},children:[r(X,{onClick:()=>o(!0)}),r(b,{children:i})]})},Se=Object.assign(fe,{Message:S,Close:X});try{b.displayName="ProactiveMessageContainer",b.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:b.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{M.displayName="ProactiveContainer",M.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:M.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const ye=async e=>{const t=document.createElement("link"),n=new Promise((o,i)=>{t.onload=o,t.onerror=i});t.rel="stylesheet",t.href=e,document.head.appendChild(t),await n},Z=e=>{const[t,n]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(!(!e||t)){if(!e.stylesheet){n(!0);return}(async()=>(await ye(e.stylesheet).catch(o=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(o)}),n(!0)))()}},[e]),t},_e=380,ve=800,q=A(P.WIDGET),T=p(q("div","chat"),{width:_e,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ve,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),O=p(q("div","launcher"),{}),H={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},K={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},J=p(q("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${O},
    & > ${T}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${T}`]:{...H},[`& > ${O}`]:{...K}},false:{[`& > ${T}`]:{...K},[`& > ${O}`]:{...H}}},isHidden:{true:{display:"none"}}}}),Ee=({children:e,chatAPI:t,sendMessage:n,assistant:o})=>{var m;const[i,h]=a.exports.useState(!1),[C,g]=a.exports.useState(!1),[s,_]=a.exports.useState([]),L=a.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),$=G(o);w(d.CLOSE,()=>h(!1)),w(d.OPEN,()=>h(!0));const R=x.useCallback(()=>n({type:d.OPEN}),[]),V=x.useCallback(()=>n({type:d.CLOSE}),[]);a.exports.useEffect(()=>{if(!!ae(t))return Object.assign(t,{open:R,close:V,hide:()=>g(!0),show:()=>g(!1),interact:E=>n({type:d.INTERACT,payload:E}),proactive:{clear:()=>_([]),push:(...E)=>_(se=>[...se,...E])}}),()=>{Object.assign(t,{open:u,hide:u,show:u,close:u,interact:u,proactive:{clear:u,push:u}})}},[]);const c=(m=o==null?void 0:o.position)!=null?m:W.ChatPosition.RIGHT,l={bottom:o==null?void 0:o.spacing.bottom,[c]:o==null?void 0:o.spacing.side},v=Z(o);return y(J,{withChat:i,isHidden:C,className:$,children:[!!o&&v&&y(O,{style:l,children:[r(Se,{side:c,messages:s}),r(U,{onClick:R,image:o.launcher})]}),r(T,{style:L?{}:l,children:e})]})},xe=Object.assign(Ee,{Launcher:U,Container:J,ChatContainer:T,LauncherContainer:O});const Q=p("div",{height:"100%",[`& ${D.Container}`]:{height:"100%"}}),B=e=>{const t=JSON.stringify(e);window.postMessage(t),window.parent.postMessage(t,"*")},Te=({assistant:e,versionID:t,verify:n,user:o,url:i,session:h})=>{const C=a.exports.useCallback(()=>B({type:d.CLOSE}),[]),g=a.exports.useCallback(c=>B({type:d.SAVE_SESSION,payload:c}),[]),s=ie({versionID:t,verify:n,url:i,user:o,session:h,saveSession:g},[n.projectID]);w(d.INTERACT,({payload:c})=>s.interact(c)),w(d.OPEN,async()=>{s.isStatus(N.IDLE)&&await _()});const _=async()=>{await s.launch()},L=a.exports.useCallback(()=>{s.setStatus(N.ENDED),C()},[]),$=G(e),R=a.exports.useCallback(c=>{const l=s.session.turns[c-1];return(l==null?void 0:l.type)===k.USER?l:null},[s.session.turns]);return Z(e)?r(ue,{...s,children:r(Q,{className:$,children:y(D,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:s.session.startTime,hasEnded:s.isStatus(N.ENDED),isLoading:!s.session.turns.length,onStart:_,onEnd:L,onSend:s.reply,onMinimize:C,children:[s.session.turns.map((c,l)=>F(c).with({type:k.USER},({id:v,...m})=>a.exports.createElement(ce,{...j(m,["type"]),key:v})).with({type:k.SYSTEM},({id:v,...m})=>r(I,{...j(m,["type"]),feedback:e.feedback?{onClick:E=>{s.feedback(E,m.messages,R(l))}}:void 0,avatar:e.avatar,isLast:l===s.session.turns.length-1},v)).exhaustive()),s.indicator&&r(I.Indicator,{avatar:e.avatar})]})})}):null};Object.assign(Te,{sendMessage:B,Container:Q});const ee="https://source.unsplash.com/featured/248x150",te={title:"First Card",description:"Lorem ipsum dolor sit amet",image:ee,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},oe=[te,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:ee},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],et={title:"Components/Carousel",component:Y},ne=e=>r(Y,{...e}),Oe=ne.bind({});Oe.args={cards:[te]};const Re=ne.bind({});Re.args={cards:oe};const be=e=>{const t=a.exports.useRef(null),n=a.exports.useRef(null);return r(xe.ChatContainer,{children:y(D.Dialog,{children:[r(I.Controls,{ref:n}),y(I.Container,{ref:t,withImage:!0,scrollable:!0,children:[r(re,{avatar:le}),r(Y,{...e,controlsRef:n,containerRef:t})]})]})})},Me=be.bind({});Me.args={cards:oe};export{Re as MultipleCards,Oe as SingleCard,Me as WithControls,et as default};
//# sourceMappingURL=Carousel.story.8cb42108.js.map
