import{j as O}from"./jsx-runtime-DRTy3Uxn.js";import{r as d}from"./index-BBkUAzwr.js";import{c as A,a as I}from"./functional-ii7S4iDS.js";import{s as N}from"./animation-I98MwHEk.js";function z(){return z=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},z.apply(this,arguments)}function B(n,e){if(n==null)return{};var t={},r=Object.keys(n),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}var M=d.useLayoutEffect,V=function(e){var t=d.useRef(e);return M(function(){t.current=e}),t},C=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},P=function(e,t){var r=d.useRef();return d.useCallback(function(a){e.current=a,r.current&&C(r.current,null),r.current=t,t&&C(t,a)},[t])},L={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},q=function(e){Object.keys(L).forEach(function(t){e.style.setProperty(t,L[t],"important")})},H=q,o=null,T=function(e,t){var r=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?r+t.borderSize:r-t.paddingSize};function G(n,e,t,r){t===void 0&&(t=1),r===void 0&&(r=1/0),o||(o=document.createElement("textarea"),o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),H(o)),o.parentNode===null&&document.body.appendChild(o);var a=n.paddingSize,i=n.borderSize,u=n.sizingStyle,g=u.boxSizing;Object.keys(u).forEach(function(p){var v=p;o.style[v]=u[v]}),H(o),o.value=e;var s=T(o,n);o.value=e,s=T(o,n),o.value="x";var h=o.scrollHeight-a,l=h*t;g==="border-box"&&(l=l+a+i),s=Math.max(l,s);var f=h*r;return g==="border-box"&&(f=f+a+i),s=Math.min(f,s),[s,h]}var E=function(){},U=function(e,t){return e.reduce(function(r,a){return r[a]=t[a],r},{})},Y=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],K=!!document.documentElement.currentStyle,X=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var r=U(Y,t),a=r.boxSizing;if(a==="")return null;K&&a==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),u=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:u}},Z=X;function F(n,e,t){var r=V(t);d.useLayoutEffect(function(){var a=function(u){return r.current(u)};if(n)return n.addEventListener(e,a),function(){return n.removeEventListener(e,a)}},[])}var D=function(e){F(window,"resize",e)},J=function(e){F(document.fonts,"loadingdone",e)},Q=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ee=function(e,t){var r=e.cacheMeasurements,a=e.maxRows,i=e.minRows,u=e.onChange,g=u===void 0?E:u,s=e.onHeightChange,h=s===void 0?E:s,l=B(e,Q),f=l.value!==void 0,p=d.useRef(null),v=P(p,t),w=d.useRef(0),y=d.useRef(),b=function(){var c=p.current,S=r&&y.current?y.current:Z(c);if(S){y.current=S;var R=G(S,c.value||c.placeholder||"x",i,a),x=R[0],k=R[1];w.current!==x&&(w.current=x,c.style.setProperty("height",x+"px","important"),h(x,{rowHeight:k}))}},_=function(c){f||b(),g(c)};return d.useLayoutEffect(b),D(b),J(b),d.createElement("textarea",z({},l,{onChange:_,ref:v}))},te=d.forwardRef(ee);const $={width:"calc(100% - 42px)",borderRadius:"$1 0 0 $1",height:"42px",borderRightWidth:0,fontFamily:"$default",fontSize:"$2"},re={boxSizing:"border-box",border:"1px solid rgba(115,115,118,0.3)",backgroundColor:"$white",boxShadow:"0 1px 12px $shadow2",trans:["border-color"],resize:"none"},ne={border:"1px solid rgba(115,115,118,0.5)"},W=N(te,{...re,...$,padding:"11px $4 11px",color:"$black","&:focus":{...ne,...$,outline:"none"},"&::placeholder":{color:"$darkGrey"}}),m=d.forwardRef(({onValueChange:n,onChange:e,...t},r)=>{const a=I(e,i=>n(i.target.value));return O.jsx(W,{ref:r,...t,onChange:a,minRows:1,maxRows:5,style:{height:42}})}),ue=Object.assign(m,{Controlled:A(m,{defaultValue:""}),Container:W});try{m.displayName="Textarea",m.__docgenInfo={description:"A textarea form control.",displayName:"Textarea",props:{value:{defaultValue:null,description:"The value being controlled by the component.",name:"value",required:!0,type:{name:"string"}},onValueChange:{defaultValue:null,description:"A callback that will be called with new values when the control is updated.",name:"onValueChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}export{ue as T,ne as a,re as t};
