import{r as n,R as A,a as S,j as i}from"./jsx-runtime.f7fcb55b.js";import{A as z}from"./index.5bc02b27.js";import{u as y,T as l,i as B,c as G,C as I,a as V,S as R,b as O,K as Y,U as J,o as N,d as E,e as L}from"./index.0cbeb73e.js";import{V as K}from"./fixtures.e9667a2d.js";import{b as X,s as b}from"./theme.64976119.js";import"./index.6879560f.js";import{L as _}from"./index.eda711be.js";import"./index.b838d880.js";import"./index.c4b61e80.js";import{c as Q}from"./index.ac1646b5.js";import"./index.18681e2a.js";import"./index.cf07f629.js";import"./index.6047f599.js";import"./index.597d7606.js";import"./index.d1d9d853.js";import"./index.23164ba8.js";import"./index.2b804708.js";import"./index.038c35af.js";import"./iframe.93d7e179.js";import"./is-plain-object.ed97bcae.js";import"./index.b6c875c8.js";import"./variants.cf7c2bb7.js";import"./top-caret.13af6187.js";const $=e=>{const[r,s]=n.exports.useState("");return n.exports.useEffect(()=>{e!=null&&e.color&&s(X({color:e.color}))},[e==null?void 0:e.color]),r},Z=380,ee=800,m=b("div",{width:Z,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ee}),d=b("div",{}),D={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},H={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},M=b("div",{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${d},
    & > ${m}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${m}`]:{...D},[`& > ${d}`]:{...H}},false:{[`& > ${m}`]:{...H},[`& > ${d}`]:{...D}}},isHidden:{true:{display:"none"}}}}),te=({children:e,chatAPI:r,sendMessage:s,assistant:o})=>{var a;const[T,u]=n.exports.useState(!1),[h,C]=n.exports.useState(!1),t=$(o);y(l.CLOSE,()=>u(!1)),y(l.OPEN,()=>u(!0));const p=A.useCallback(()=>s({type:l.OPEN}),[]),x=A.useCallback(()=>s({type:l.CLOSE}),[]);n.exports.useEffect(()=>{!B(r)||Object.assign(r,{open:p,close:x,hide:()=>C(!0),show:()=>C(!1),interact:c=>s({type:l.INTERACT,payload:c})})},[]);const v=(a=o==null?void 0:o.position)!=null?a:G.ChatPosition.RIGHT,f={bottom:o==null?void 0:o.spacing.bottom,[v]:o==null?void 0:o.spacing.side};return S(M,{withChat:T,isHidden:h,className:t,children:[!!o&&i(d,{style:f,children:i(_,{onClick:p,image:o.launcher})}),i(m,{style:f,children:e})]})},oe=Object.assign(te,{Launcher:_,Container:M,ChatContainer:m,LauncherContainer:d}),j=b("div",{height:"100%",[`& ${I.Container}`]:{height:"100%"}}),k=e=>{const r=JSON.stringify(e);window.postMessage(r),window.parent.postMessage(r,"*")},re=({assistant:e,versionID:r,verify:s,user:o,url:T,session:u})=>{const h=n.exports.useCallback(()=>k({type:l.CLOSE}),[]),C=n.exports.useCallback(a=>k({type:l.SAVE_SESSION,payload:a}),[]),t=V({versionID:r,verify:s,url:T,user:o,session:u,saveSession:C},[s.projectID]);y(l.INTERACT,({payload:a})=>t.interact(a)),y(l.OPEN,async()=>{t.isStatus(R.IDLE)&&await p()});const p=async()=>{await t.launch()},x=n.exports.useCallback(()=>{t.setStatus(R.ENDED),h()},[]),v=$(e),f=n.exports.useCallback(a=>{const c=t.session.turns[a-1];return(c==null?void 0:c.type)===O.USER?c:null},[t.session.turns]);return i(Q,{...t,children:i(j,{className:v,children:S(I,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:t.session.startTime,hasEnded:t.isStatus(R.ENDED),isLoading:!t.session.turns.length,onStart:p,onEnd:x,onSend:t.reply,onMinimize:h,children:[t.session.turns.map((a,c)=>Y(a).with({type:O.USER},({id:w,...g})=>n.exports.createElement(J,{...N(g,["type"]),key:w})).with({type:O.SYSTEM},({id:w,...g})=>i(E,{...N(g,["type"]),feedback:e.feedback?{onClick:U=>{t.feedback(U,g.messages,f(c))}}:void 0,avatar:e.avatar,isLast:c===t.session.turns.length-1},w)).exhaustive()),t.indicator&&i(E.Indicator,{avatar:e.avatar})]})})})};Object.assign(re,{sendMessage:k,Container:j});const P="https://source.unsplash.com/featured/248x150",W={title:"First Card",description:"Lorem ipsum dolor sit amet",image:P,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},q=[W,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:P},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Ae={title:"Components/Carousel",component:L},F=e=>i(L,{...e}),ne=F.bind({});ne.args={cards:[W]};const ie=F.bind({});ie.args={cards:q};const se=e=>{const r=n.exports.useRef(null),s=n.exports.useRef(null);return i(oe.ChatContainer,{children:S(I.Dialog,{children:[i(E.Controls,{ref:s}),S(E.Container,{ref:r,withImage:!0,scrollable:!0,children:[i(z,{avatar:K}),i(L,{...e,controlsRef:s,containerRef:r})]})]})})},ae=se.bind({});ae.args={cards:q};export{ie as MultipleCards,ne as SingleCard,ae as WithControls,Ae as default};
//# sourceMappingURL=Carousel.story.e6b7aa86.js.map
