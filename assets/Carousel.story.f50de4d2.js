import{r,R as A,a as S,j as n}from"./jsx-runtime.f454eb39.js";import{A as B}from"./index.c99c0219.js";import{u as y,T as m,i as G,c as V,C as k,a as Y,S as R,b as I,K as J,U as K,o as M,d as E,e as L}from"./index.c8ccbe0f.js";import{V as X}from"./fixtures.e9667a2d.js";import{b as Q,t as Z,C as ee,s as x}from"./theme.2dd218d8.js";import"./index.484a71f2.js";import{L as _}from"./index.d24cdb0b.js";import"./index.3eac082d.js";import"./index.256ddc1a.js";import{c as te}from"./index.dad6f850.js";import"./index.22b3a25f.js";import"./index.cf2e15f1.js";import"./index.d55e7d7b.js";import"./index.f6b152c9.js";import"./index.b7a612ae.js";import"./index.3f8babac.js";import"./index.28a0d1aa.js";import"./index.c3887d88.js";import"./index.0cc08b76.js";import"./index.cc53eee4.js";import"./iframe.a8814c80.js";import"./index.f2d7b053.js";import"./variants.96181736.js";import"./top-caret.7caa7a83.js";import"./is-plain-object.ed97bcae.js";const $=e=>{const[i,s]=r.exports.useState("");return r.exports.useEffect(()=>{e!=null&&e.color&&s(Q({color:e.color}))},[e==null?void 0:e.color]),i},oe=380,re=800,N=Z(ee.WIDGET),p=x(N("div","chat"),{width:oe,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:re,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),d=x(N("div","launcher"),{}),D={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},H={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},j=x(N("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${d},
    & > ${p}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${p}`]:{...D},[`& > ${d}`]:{...H}},false:{[`& > ${p}`]:{...H},[`& > ${d}`]:{...D}}},isHidden:{true:{display:"none"}}}}),ie=({children:e,chatAPI:i,sendMessage:s,assistant:o})=>{var c;const[T,u]=r.exports.useState(!1),[h,C]=r.exports.useState(!1),t=r.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),f=$(o);y(m.CLOSE,()=>u(!1)),y(m.OPEN,()=>u(!0));const g=A.useCallback(()=>s({type:m.OPEN}),[]),w=A.useCallback(()=>s({type:m.CLOSE}),[]);r.exports.useEffect(()=>{!G(i)||Object.assign(i,{open:g,close:w,hide:()=>C(!0),show:()=>C(!1),interact:l=>s({type:m.INTERACT,payload:l})})},[]);const v=(c=o==null?void 0:o.position)!=null?c:V.ChatPosition.RIGHT,a={bottom:o==null?void 0:o.spacing.bottom,[v]:o==null?void 0:o.spacing.side};return S(j,{withChat:T,isHidden:h,className:f,children:[!!o&&n(d,{style:a,children:n(_,{onClick:g,image:o.launcher})}),n(p,{style:t?{}:a,children:e})]})},ne=Object.assign(ie,{Launcher:_,Container:j,ChatContainer:p,LauncherContainer:d});const W=x("div",{height:"100%",[`& ${k.Container}`]:{height:"100%"}}),O=e=>{const i=JSON.stringify(e);window.postMessage(i),window.parent.postMessage(i,"*")},se=({assistant:e,versionID:i,verify:s,user:o,url:T,session:u})=>{const h=r.exports.useCallback(()=>O({type:m.CLOSE}),[]),C=r.exports.useCallback(a=>O({type:m.SAVE_SESSION,payload:a}),[]),t=Y({versionID:i,verify:s,url:T,user:o,session:u,saveSession:C},[s.projectID]);y(m.INTERACT,({payload:a})=>t.interact(a)),y(m.OPEN,async()=>{t.isStatus(R.IDLE)&&await f()});const f=async()=>{await t.launch()},g=r.exports.useCallback(()=>{t.setStatus(R.ENDED),h()},[]),w=$(e),v=r.exports.useCallback(a=>{const c=t.session.turns[a-1];return(c==null?void 0:c.type)===I.USER?c:null},[t.session.turns]);return n(te,{...t,children:n(W,{className:w,children:S(k,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:t.session.startTime,hasEnded:t.isStatus(R.ENDED),isLoading:!t.session.turns.length,onStart:f,onEnd:g,onSend:t.reply,onMinimize:h,children:[t.session.turns.map((a,c)=>J(a).with({type:I.USER},({id:l,...b})=>r.exports.createElement(K,{...M(b,["type"]),key:l})).with({type:I.SYSTEM},({id:l,...b})=>n(E,{...M(b,["type"]),feedback:e.feedback?{onClick:z=>{t.feedback(z,b.messages,v(c))}}:void 0,avatar:e.avatar,isLast:c===t.session.turns.length-1},l)).exhaustive()),t.indicator&&n(E.Indicator,{avatar:e.avatar})]})})})};Object.assign(se,{sendMessage:O,Container:W});const F="https://source.unsplash.com/featured/248x150",P={title:"First Card",description:"Lorem ipsum dolor sit amet",image:F,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},q=[P,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:F},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],_e={title:"Components/Carousel",component:L},U=e=>n(L,{...e}),ae=U.bind({});ae.args={cards:[P]};const ce=U.bind({});ce.args={cards:q};const me=e=>{const i=r.exports.useRef(null),s=r.exports.useRef(null);return n(ne.ChatContainer,{children:S(k.Dialog,{children:[n(E.Controls,{ref:s}),S(E.Container,{ref:i,withImage:!0,scrollable:!0,children:[n(B,{avatar:X}),n(L,{...e,controlsRef:s,containerRef:i})]})]})})},le=me.bind({});le.args={cards:q};export{ce as MultipleCards,ae as SingleCard,le as WithControls,_e as default};
//# sourceMappingURL=Carousel.story.f50de4d2.js.map
