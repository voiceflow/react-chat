{"version":3,"file":"index.2c45e19f.js","sources":["../../src/contexts/AutoScrollContext.tsx","../../../../node_modules/remeda/dist/es/noop.js","../../src/contexts/RuntimeAPIContext.tsx","../../src/components/Card/styled.ts","../../src/components/Card/utils.ts","../../src/components/Card/index.tsx"],"sourcesContent":["import React, { createContext, useCallback, useMemo } from 'react';\n\nexport interface AutoScrollContext {\n  scrollToBottom: () => void;\n}\n\nexport const AutoScrollContext = createContext<AutoScrollContext>({\n  scrollToBottom: () => undefined,\n});\n\nexport const { Consumer: AutoScrollConsumer } = AutoScrollContext;\n\nexport interface AutoScrollProviderProps<T> extends React.PropsWithChildren {\n  target: React.RefObject<T>;\n}\n\nexport const AutoScrollProvider = <T extends HTMLElement>({ target, children }: AutoScrollProviderProps<T>) => {\n  const scrollToBottom = useCallback(() => {\n    requestAnimationFrame(() => {\n      const el = target.current;\n      if (!el) return;\n\n      const { scrollTop, scrollHeight, clientHeight } = el;\n      const hiddenHeight = scrollHeight - clientHeight;\n      if (hiddenHeight === scrollTop) return;\n\n      el.scrollTo({ top: hiddenHeight });\n    });\n  }, []);\n\n  const context = useMemo(() => ({ scrollToBottom }), [scrollToBottom]);\n\n  return <AutoScrollContext.Provider value={context}>{children}</AutoScrollContext.Provider>;\n};\n","/**\n * A function that returns always `undefined`.\n * @signature\n *    R.noop()\n * @example\n *    onSomething(R.noop)\n * @category Function\n */\nexport var noop = function () { return undefined; };\n","import React, { createContext, useMemo } from 'react';\nimport * as R from 'remeda';\n\nimport type { useRuntime } from '@/hooks';\n\nexport interface RuntimeAPIContext extends Pick<ReturnType<typeof useRuntime>, 'send' | 'setStatus'> {}\n\nexport const RuntimeAPIContext = createContext<RuntimeAPIContext>({\n  send: R.noop,\n  setStatus: R.noop,\n});\n\nexport const RuntimeAPIProvider = ({ children, ...api }: RuntimeAPIContext & React.PropsWithChildren) => {\n  const context = useMemo(() => api, []);\n\n  return <RuntimeAPIContext.Provider value={context}>{children}</RuntimeAPIContext.Provider>;\n};\n","import Button from '@/components/Button';\nimport Image from '@/components/Image';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nexport const CARD_WIDTH = 246;\n\nconst tag = tagFactory(ClassName.CARD);\n\nexport const Container = styled(tag('section'), {\n  display: 'inline-flex',\n  flexDirection: 'column',\n  width: CARD_WIDTH,\n  border: '1px solid #f1f1f1',\n  borderRadius: '$2',\n  boxSizing: 'content-box',\n  overflow: 'hidden',\n  backgroundColor: '$lightGrey',\n\n  [`& ${Image.Background.Base}`]: {\n    height: 150,\n  },\n\n  [`& ${Button.Container}`]: {\n    width: '100%',\n    color: '$primary',\n    backgroundColor: '$white',\n    boxShadow: '0 5px 8px -8px $shadow12, 0 2px 4px -3px $shadow12, 0 0 0 1px $shadow3, 0 1px 3px 1px $shadow1',\n    marginBottom: '$2',\n    trans: ['color', 'box-shadow'],\n\n    '&:hover': {\n      color: '$darkPrimary',\n      backgroundColor: '$white',\n      boxShadow: '0 5px 8px -8px $shadow12, 0 2px 4px -3px $shadow12, 0 0 0 1px $shadow4, 0 1px 4px 1px $shadow4',\n    },\n\n    '&:first-of-type': {\n      marginTop: '$3',\n    },\n\n    '&:last-of-type': {\n      marginBottom: 0,\n    },\n  },\n});\n\nexport const Content = styled(tag('main', 'content'), {\n  padding: '$3',\n});\n\nexport const Header = styled(tag('h3', 'header'), {\n  margin: '0 0 $1 0',\n  typo: { weight: '$2' },\n  color: '$black',\n});\n\nexport const Description = styled(tag('p', 'description'), {\n  margin: 0,\n  typo: { size: '$1' },\n  color: '$darkGrey',\n  whiteSpace: 'normal',\n});\n\nexport const Link = styled(tag('a', 'link'), {\n  margin: 0,\n  typo: { size: '$1' },\n  whiteSpace: 'normal',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  color: 'rgb(93, 157, 245)',\n  textDecoration: 'underline',\n  pointerEvents: 'all',\n});\n","export const isValidHttpUrl = (value: string) => {\n  let url;\n\n  try {\n    url = new URL(value);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === 'http:' || url.protocol === 'https:';\n};\n","import { useContext, useMemo } from 'react';\n\nimport type { RuntimeAction } from '@/common';\nimport Button from '@/components/Button';\nimport Image from '@/components/Image';\nimport { RuntimeAPIContext } from '@/contexts';\n\nimport { Container, Content, Description, Header, Link } from './styled';\nimport { isValidHttpUrl } from './utils';\n\nexport interface CardActionProps {\n  /**\n   * The label that will appear on the button.\n   */\n  name: string;\n\n  /**\n   * the request that will be sent by the runtime when the button is clicked.\n   */\n  request: RuntimeAction;\n}\n\nexport interface CardProps {\n  /**\n   * The title of the card.\n   */\n  title: string;\n\n  /**\n   * Text content of the card.\n   * If the string is a valid URL it will be rendered in a {@link Link}.\n   */\n  description: string;\n\n  /**\n   * An image URL that will render at the top of the card if provided.\n   */\n  image?: string | undefined | null;\n\n  /**\n   * A list of actions that will appear as button controls at the bottom of the card.\n   */\n  actions?: CardActionProps[] | undefined;\n}\n\nexport const isValidCard = (card: CardProps) => {\n  return !!card.title || !!card.description || !!card.image || !!card.actions?.filter(({ name }) => !!name).length;\n};\n\nconst Card: React.FC<CardProps> = ({ title, description, image, actions = [] }) => {\n  const runtime = useContext(RuntimeAPIContext);\n  const isLink = isValidHttpUrl(description);\n\n  const buttons = useMemo(() => actions.filter(({ name }) => !!name), [actions]);\n\n  return (\n    <Container>\n      {!!image && <Image.Background image={image} />}\n      <Content>\n        {!!title && <Header>{title}</Header>}\n        {!!description &&\n          (isLink ? (\n            <Link rel=\"noopener noreferrer\" href={description} target=\"_blank\">\n              {description}\n            </Link>\n          ) : (\n            <Description>{description}</Description>\n          ))}\n        {buttons.map(({ name, request }, index) => (\n          <Button onClick={() => runtime.send(name, request)} key={index}>\n            {name}\n          </Button>\n        ))}\n      </Content>\n    </Container>\n  );\n};\n\n/**\n * A titled card with content and optional controls.\n *\n * @see {@link https://voiceflow.github.io/react-chat/?path=/story/components-card--simple}\n */\nexport default Object.assign(Card, {\n  Container,\n});\n"],"names":["AutoScrollContext","createContext","AutoScrollConsumer","AutoScrollProvider","target","scrollToBottom","useCallback","requestAnimationFrame","el","scrollTop","scrollHeight","clientHeight","hiddenHeight","context","useMemo","_jsx","noop","RuntimeAPIContext","R.noop","RuntimeAPIProvider","children","api","CARD_WIDTH","tag","tagFactory","ClassName","Container","styled","Image","Button","Content","Header","Description","Link","isValidHttpUrl","value","url","isValidCard","card","_a","name","Card","title","description","image","runtime","useContext","isLink","buttons","actions","_jsxs","request","Card$1"],"mappings":"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"}