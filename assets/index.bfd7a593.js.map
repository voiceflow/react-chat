{"version":3,"file":"index.bfd7a593.js","sources":["../../src/components/ChatInput/styled.ts","../../src/components/ChatInput/index.tsx"],"sourcesContent":["import Bubble from '@/components/Bubble';\nimport Icon from '@/components/Icon';\nimport { textareaFocusStyles, textareaStyles } from '@/components/Textarea/styled';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nimport Textarea from '../Textarea';\n\nconst tag = tagFactory(ClassName.CHAT_INPUT);\n\nexport const ButtonContainer = styled(tag('label', 'button'), {\n  ...textareaStyles,\n  display: 'inline-flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  paddingBottom: '9px',\n  width: '$md',\n  borderRadius: '$1',\n  boxSizing: 'border-box',\n  cursor: 'text',\n\n  [`& ${Bubble.Container}`]: {\n    transform: 'scale(0)',\n    marginTop: 'auto',\n    trans: ['background-color', 'transform'],\n  },\n\n  variants: {\n    ready: {\n      true: {\n        [`& ${Bubble.Container}`]: {\n          transform: 'scale(1)',\n          cursor: 'pointer',\n        },\n      },\n    },\n  },\n});\n\nexport const Container = styled(tag('div'), {\n  display: 'flex',\n  boxShadow: '0 1px 12px $shadow2',\n  trans: ['border-color', 'box-shadow'],\n\n  [`& ${Textarea.Container}`]: {\n    ...textareaStyles,\n    minHeight: '$md',\n    margin: 0,\n    borderRightWidth: 0,\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n    paddingRight: 7,\n    boxShadow: 'none',\n  },\n\n  [`& ${ButtonContainer}`]: {\n    height: 'inherit',\n    borderLeftWidth: 0,\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n  },\n\n  [`& ${Icon.Frame}`]: {\n    color: '$white',\n  },\n\n  [`& ${Textarea.Container}:focus`]: {\n    ...textareaFocusStyles,\n    borderRightWidth: 0,\n  },\n\n  [`& ${Textarea.Container}:focus + ${ButtonContainer}`]: {\n    ...textareaFocusStyles,\n    borderLeftWidth: 0,\n  },\n});\n","import cuid from 'cuid';\nimport { useMemo, useRef } from 'react';\n\nimport Bubble from '@/components/Bubble';\nimport Textarea, { TextareaProps } from '@/components/Textarea';\nimport { createControlled } from '@/utils/controls';\n\nimport { ButtonContainer, Container } from './styled';\n\nexport interface ChatInputProps extends TextareaProps {\n  /**\n   * If true, does not allow the user to submit a response.\n   */\n  buffering?: boolean;\n\n  /**\n   * A callback to submit the user response.\n   */\n  onSend?: VoidFunction;\n}\n\nconst ChatInput: React.FC<ChatInputProps> = ({ id, onSend, buffering, ...props }) => {\n  const internalID = useMemo(() => `vf-chat-input--${cuid()}`, []) ?? id;\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLTextAreaElement>): void => {\n    event.stopPropagation();\n    const { shiftKey } = event;\n\n    if (event.key !== 'Enter') return;\n    if (event.key === 'Enter' && !shiftKey) {\n      event.preventDefault();\n      onSend?.();\n    }\n  };\n\n  return (\n    <Container>\n      <Textarea ref={textareaRef} id={internalID} onKeyDown={handleKeyPress} {...props} />\n      <ButtonContainer htmlFor={internalID} ready={!!props.value && !buffering}>\n        <Bubble size=\"small\" svg=\"smallArrowUp\" onClick={onSend} />\n      </ButtonContainer>\n    </Container>\n  );\n};\n\n/**\n * An input control with a built-in submit button.\n *\n * @see {@link https://voiceflow.github.io/react-chat/?path=/story/components-chat-chatinput--default}\n */\nexport default Object.assign(ChatInput, {\n  Controlled: createControlled(ChatInput, {\n    defaultValue: '',\n    enrichProps: (props, [, setValue]) => ({\n      ...props,\n      onSend: (): void => {\n        setValue('');\n        props.onSend?.();\n      },\n    }),\n  }),\n  Container,\n  ButtonContainer,\n});\n"],"names":["tag","tagFactory","ClassName","ButtonContainer","styled","textareaStyles","Bubble","Container","Textarea","Icon","textareaFocusStyles","ChatInput","id","onSend","buffering","internalID","useMemo","cuid","textareaRef","useRef","_jsxs","_jsx","event","shiftKey","handleKeyPress","props","ChatInput$1","createControlled","setValue"],"mappings":"gXASA,MAAMA,EAAMC,EAAWC,EAAU,UAAU,EAE9BC,EAAkBC,EAAOJ,EAAI,QAAS,QAAQ,EAAG,CAC5D,GAAGK,EACH,QAAS,cACT,eAAgB,SAChB,WAAY,SACZ,cAAe,MACf,MAAO,MACP,aAAc,KACd,UAAW,aACX,OAAQ,OAER,CAAC,KAAKC,EAAO,aAAc,CACzB,UAAW,WACX,UAAW,OACX,MAAO,CAAC,mBAAoB,WAAW,CACzC,EAEA,SAAU,CACR,MAAO,CACL,KAAM,CACJ,CAAC,KAAKA,EAAO,aAAc,CACzB,UAAW,WACX,OAAQ,SACV,CACF,CACF,CACF,CACF,CAAC,EAEYC,EAAYH,EAAOJ,EAAI,KAAK,EAAG,CAC1C,QAAS,OACT,UAAW,sBACX,MAAO,CAAC,eAAgB,YAAY,EAEpC,CAAC,KAAKQ,EAAS,aAAc,CAC3B,GAAGH,EACH,UAAW,MACX,OAAQ,EACR,iBAAkB,EAClB,qBAAsB,EACtB,wBAAyB,EACzB,aAAc,EACd,UAAW,MACb,EAEA,CAAC,KAAKF,KAAoB,CACxB,OAAQ,UACR,gBAAiB,EACjB,oBAAqB,EACrB,uBAAwB,CAC1B,EAEA,CAAC,KAAKM,EAAK,SAAU,CACnB,MAAO,QACT,EAEA,CAAC,KAAKD,EAAS,mBAAoB,CACjC,GAAGE,EACH,iBAAkB,CACpB,EAEA,CAAC,KAAKF,EAAS,qBAAqBL,KAAoB,CACtD,GAAGO,EACH,gBAAiB,CACnB,CACF,CAAC,ECvDDC,EAAA,CAAA,CAA6C,GAAAC,EAAEA,OAAAA,EAAIC,UAAAA,KAAQC,CAAd,IAAA,OAC3C,MAAAC,GAAAC,EAAAA,kBAAA,IAAA,kBAAAC,EAAA,IAAA,EAAA,IAAAD,KAAAA,EAAAJ,EACAM,EAAAC,iBAAA,IAAA,EAaA,OAAAC,EAAAb,EAAA,CACE,SAAA,CAAAc,EAAAb,EAAA,CACE,IAAAU,EAAeA,GAAAA,EAAiBH,UAbpCO,GAAA,CACEA,EAAAA,gBAAAA,EACA,KAAA,CAAM,SAAAC,CAAEA,EAAAA,EAERD,EAAA,MAAA,SACAA,EAAA,MAAA,SAAA,CAAAC,IACED,EAAAA,eAAAA,EACAT,GAAAA,MAAAA,IACD,EAKwDW,GAAAA,CAAoBC,CAAAA,EAAAA,EAAAA,EAAAA,CAC3E,QAAAV,EAA0BA,MAAAA,CAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAqCD,SAAAA,EAAAA,EAAAA,CAC7D,KAAA,QAAa,IAAA,eAAY,QAAAD,CAAwBA,CAAAA,CAAjD,CAAA,CAAA,CAHJ,CAAA,CAOH,EAODa,EAAA,OAAA,OAAAf,EAAA,CAAwC,WAAAgB,EAAAhB,EAAA,CACE,aAAA,GACxB,YAAA,CAAAc,EAAA,CAAA,CAAAG,CAAA,KAAA,CACyB,GAAAH,EAClCA,OAAAA,IAAAA,OAEDG,EAAAA,EAAAA,GACAH,EAAAA,EAAAA,SAAAA,MAAAA,EAAAA,KAAAA,EAAA,CACD,EALoC,CAAA,EAFb,UAAAlB,EAU5BA,gBAAAA,CAXsC,CAAA"}