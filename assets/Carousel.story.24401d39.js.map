{"version":3,"file":"Carousel.story.24401d39.js","sources":["../../src/common/hooks.ts","../../src/components/Proactive/Close.tsx","../../src/components/Proactive/Message.tsx","../../src/components/Proactive/index.tsx","../../src/utils/stylesheet.ts","../../src/views/ChatWidget/styled.ts","../../src/views/ChatWidget/index.tsx","../../src/views/ChatWindow/styled.ts","../../src/views/ChatWindow/index.tsx","../../src/components/Carousel/Carousel.story.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { createCustomTheme } from '@/styles';\n\nimport { Assistant } from './types';\n\nexport const useTheme = (assistant?: Assistant) => {\n  const [theme, setTheme] = useState('');\n  useEffect(() => {\n    if (assistant?.color) {\n      setTheme(createCustomTheme({ color: assistant.color }));\n    }\n  }, [assistant?.color]);\n\n  return theme;\n};\n","import React from 'react';\n\nimport Icon from '@/components/Icon';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nexport const tag = tagFactory(ClassName.PROACTIVE_CLOSE);\n\nexport const CloseContainer = styled(tag('div'), {\n  width: 32,\n  height: 32,\n  borderRadius: '$round',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: '#656D75',\n  cursor: 'pointer',\n  background: '$white',\n  boxShadow: '$surfaceZ1Light',\n\n  [`& ${Icon.Frame}`]: {\n    width: 10,\n    height: 10,\n  },\n\n  [`&:hover, &:active`]: {\n    color: '#2B3239',\n  },\n});\n\nconst Close: React.FC<React.ComponentProps<typeof CloseContainer>> = ({ ...props }) => (\n  <CloseContainer {...props}>\n    <Icon svg=\"closeV2\" />\n  </CloseContainer>\n);\n\nexport default Close;\n","import { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nexport const tag = tagFactory(ClassName.PROACTIVE_MESSAGE);\n\nexport const MessageContainer = styled(tag('div'), {\n  padding: '11px 16px 10px 16px',\n  maxWidth: 256,\n  color: '#1A1E23',\n  boxShadow: '$surfaceZ1Light',\n  borderRadius: '$2',\n  background: '$white',\n  typo: { size: 14 },\n});\n\nexport default MessageContainer;\n","import { Trace } from '@voiceflow/base-types';\nimport React from 'react';\nimport { match } from 'ts-pattern';\n\nimport { ChatPosition } from '@/common';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { animationStyles, styled } from '@/styles';\n\nimport Close, { CloseContainer } from './Close';\nimport Message, { MessageContainer } from './Message';\n\nexport const tag = tagFactory(ClassName.PROACTIVE);\n\nexport const ProactiveMessageContainer = styled('div', {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: 8,\n  margin: '$4 0',\n  alignItems: 'inherit',\n\n  [`& ${MessageContainer}`]: {\n    ...animationStyles({ duration: 150, delay: 0 }),\n  },\n});\n\nexport const ProactiveContainer = styled(tag('div'), {\n  position: 'absolute',\n  bottom: '100%',\n  width: 256,\n  display: 'flex',\n  flexDirection: 'column',\n\n  [`& ${CloseContainer}`]: {\n    opacity: 0,\n  },\n\n  [`&:hover`]: {\n    [`& ${CloseContainer}`]: {\n      opacity: 1,\n    },\n  },\n});\n\ninterface ProactiveQueueProps {\n  side: ChatPosition;\n  messages: Trace.AnyTrace[];\n}\n\nconst ProactiveQueue: React.FC<ProactiveQueueProps> = ({ side, messages }) => {\n  const [isClosed, setIsClosed] = React.useState(false);\n\n  const queue = React.useMemo(\n    () =>\n      messages.map((message, index) =>\n        match(message)\n          .with({ type: Trace.TraceType.TEXT }, ({ payload }) => <Message key={index}>{String(payload.message)}</Message>)\n          .otherwise(() => null)\n      ),\n    [messages]\n  );\n\n  React.useEffect(() => {\n    if (!queue.length) return;\n    setIsClosed(false);\n  }, [queue]);\n\n  if (isClosed || !queue.length) return null;\n\n  return (\n    <ProactiveContainer style={{ [side]: 0, alignItems: side === ChatPosition.LEFT ? 'start' : 'end' }}>\n      <Close onClick={() => setIsClosed(true)} />\n      <ProactiveMessageContainer>{queue}</ProactiveMessageContainer>\n    </ProactiveContainer>\n  );\n};\n\nexport default Object.assign(ProactiveQueue, {\n  Message,\n  Close,\n});\n","/* eslint-disable no-console */\nimport { useEffect, useState } from 'react';\n\nimport { Assistant } from '@/common';\n\n// used to add stylesheets dynamically, resolves when loaded\nexport const addStyleSheetURL = async (url: string) => {\n  const link = document.createElement('link');\n  const load = new Promise((resolve, reject) => {\n    link.onload = resolve;\n    link.onerror = reject;\n  });\n\n  link.rel = 'stylesheet';\n  link.href = url;\n  document.head.appendChild(link);\n\n  await load;\n};\n\n// do not load until stylesheet is resolved\nexport const useResolveAssistantStyleSheet = (assistant?: Assistant): boolean => {\n  const [isStyleSheetResolved, setStyleSheetResolved] = useState(false);\n\n  useEffect(() => {\n    if (!assistant || isStyleSheetResolved) return;\n\n    if (!assistant.stylesheet) {\n      setStyleSheetResolved(true);\n      return;\n    }\n\n    // inject stylesheet url\n    (async () => {\n      await addStyleSheetURL(assistant.stylesheet!).catch((error) => {\n        console.error(`failed to load stylesheet: ${assistant.stylesheet}`);\n        console.error(error);\n      });\n      setStyleSheetResolved(true);\n    })();\n  }, [assistant]);\n\n  return isStyleSheetResolved;\n};\n","import { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { CSS, styled } from '@/styles';\n\nconst CHAT_WIDTH = 380;\nconst MAX_CHAT_HEIGHT = 800;\n\nconst tag = tagFactory(ClassName.WIDGET);\n\nexport const ChatContainer = styled(tag('div', 'chat'), {\n  width: CHAT_WIDTH,\n  overflow: 'hidden',\n  borderRadius: '$2',\n  boxShadow: '0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4',\n\n  height: '90%',\n  maxHeight: MAX_CHAT_HEIGHT,\n\n  '@mobile': {\n    position: 'fixed',\n    height: 'unset',\n    maxHeight: 'unset',\n    width: 'unset',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    borderRadius: 0,\n    boxShadow: 'none',\n  },\n});\n\nexport const LauncherContainer = styled(tag('div', 'launcher'), {});\n\nconst animateInStyles: CSS = {\n  opacity: 1,\n  pointerEvents: 'auto',\n  transform: 'translateY(0%)',\n  transition: 'transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear',\n};\n\nconst animateOutStyles: CSS = {\n  opacity: 0,\n  pointerEvents: 'none',\n  transform: 'translateY(100%)',\n  transition: 'transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear',\n};\n\nexport const Container = styled(tag('div'), {\n  position: 'fixed',\n  inset: 0,\n  '-webkit-font-smoothing': 'antialiased',\n  '-moz-osx-font-smoothing': 'grayscale',\n  pointerEvents: 'none',\n  zIndex: 10000,\n\n  [`\n    & > ${LauncherContainer},\n    & > ${ChatContainer}\n  `]: {\n    position: 'absolute',\n  },\n\n  variants: {\n    withChat: {\n      true: {\n        [`& > ${ChatContainer}`]: {\n          ...animateInStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateOutStyles,\n        },\n      },\n      false: {\n        [`& > ${ChatContainer}`]: {\n          ...animateOutStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateInStyles,\n        },\n      },\n    },\n    isHidden: {\n      true: {\n        display: 'none',\n      },\n    },\n  },\n});\n","import { Trace } from '@voiceflow/base-types';\nimport type { RuntimeAction } from '@voiceflow/sdk-runtime';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { Assistant, ChatPosition, isObject, Listeners, PostMessage, useTheme } from '@/common';\nimport Launcher from '@/components/Launcher';\nimport Proactive from '@/components/Proactive';\nimport { noop } from '@/utils/functional';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\n\nimport { ChatContainer, Container, LauncherContainer } from './styled';\nimport { ChatAPI } from './types';\n\ninterface ChatWidgetProps extends React.PropsWithChildren {\n  assistant?: Assistant | undefined;\n  widgetURL?: string;\n  chatAPI?: ChatAPI | undefined;\n  sendMessage: (message: PostMessage.AnyMessage) => void;\n}\n\nconst ChatWidget: React.FC<ChatWidgetProps> = ({ children, chatAPI, sendMessage, assistant }) => {\n  /** initialization */\n  const [isOpen, setOpen] = useState(false);\n  const [isHidden, setHidden] = useState(false);\n  const [proactiveMessages, setProactiveMessages] = useState<Trace.AnyTrace[]>([]);\n  const isMobile = useMemo(() => window.matchMedia('(max-width: 768px)').matches, []);\n\n  const theme = useTheme(assistant);\n\n  /** listeners */\n  Listeners.useListenMessage(PostMessage.Type.CLOSE, () => setOpen(false));\n  Listeners.useListenMessage(PostMessage.Type.OPEN, () => setOpen(true));\n\n  const open = React.useCallback(() => sendMessage({ type: PostMessage.Type.OPEN }), []);\n  const close = React.useCallback(() => sendMessage({ type: PostMessage.Type.CLOSE }), []);\n\n  /** initialize window */\n  useEffect(() => {\n    if (!isObject(chatAPI)) return undefined;\n\n    Object.assign(chatAPI, {\n      open,\n      close,\n      hide: () => setHidden(true),\n      show: () => setHidden(false),\n      interact: (action: RuntimeAction) => sendMessage({ type: PostMessage.Type.ACTION_REQUEST, payload: { action } }),\n      proactive: {\n        clear: () => setProactiveMessages([]),\n        push: (...messages: Trace.AnyTrace[]) => setProactiveMessages((prev) => [...prev, ...messages]),\n      },\n    });\n\n    return () => {\n      Object.assign(chatAPI, {\n        open: noop,\n        hide: noop,\n        show: noop,\n        close: noop,\n        interact: noop,\n        proactive: {\n          clear: noop,\n          push: noop,\n        },\n      });\n    };\n  }, []);\n\n  const side = assistant?.position ?? ChatPosition.RIGHT;\n  const position = { bottom: assistant?.spacing.bottom, [side]: assistant?.spacing.side };\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant);\n\n  return (\n    <Container withChat={isOpen} isHidden={isHidden} className={theme}>\n      {!!assistant && isStyleSheetResolved && (\n        <LauncherContainer style={position}>\n          <Proactive side={side} messages={proactiveMessages} />\n          <Launcher onClick={open} image={assistant.launcher} />\n        </LauncherContainer>\n      )}\n      <ChatContainer style={isMobile ? {} : position}>{children}</ChatContainer>\n    </Container>\n  );\n};\n\nexport default Object.assign(ChatWidget, {\n  Launcher,\n  Container,\n  ChatContainer,\n  LauncherContainer,\n});\n","import Chat from '@/components/Chat';\nimport { styled } from '@/styles';\n\nexport const ChatWindowContainer = styled('div', {\n  height: '100%',\n\n  [`& ${Chat.Container}`]: {\n    height: '100%',\n  },\n});\n","import '../../styles.css';\n\nimport React, { useCallback } from 'react';\nimport * as R from 'remeda';\nimport { match } from 'ts-pattern';\n\nimport { Assistant, ChatConfig, Listeners, PostMessage, SessionOptions, SessionStatus, useTheme } from '@/common';\nimport { Chat, SystemResponse, UserResponse } from '@/components';\nimport { RuntimeAPIProvider } from '@/contexts';\nimport { FeedbackName, useRuntime } from '@/hooks';\nimport { TurnType, UserTurnProps } from '@/types';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\n\nimport { ChatWindowContainer } from './styled';\n\nconst ChatWindow: React.FC<ChatConfig & { assistant: Assistant; session: SessionOptions }> = ({\n  assistant,\n  versionID,\n  verify,\n  user,\n  url,\n  session,\n  launch,\n}) => {\n  // emitters\n  const close = useCallback(() => Listeners.sendMessage({ type: PostMessage.Type.CLOSE }), []);\n  const saveSession = useCallback((session: SessionOptions) => Listeners.sendMessage({ type: PostMessage.Type.SAVE_SESSION, payload: session }), []);\n\n  const runtime = useRuntime({ versionID, verify, url, user, session, saveSession });\n\n  // listeners\n  Listeners.useListenMessage(PostMessage.Type.OPEN, async (): Promise<void> => {\n    if (runtime.isStatus(SessionStatus.IDLE)) {\n      await handleStart();\n    }\n  });\n\n  const handleStart = async (): Promise<void> => {\n    await runtime.launch(launch);\n  };\n\n  const closeAndEnd = useCallback((): void => {\n    runtime.setStatus(SessionStatus.ENDED);\n    close();\n  }, []);\n\n  const theme = useTheme(assistant);\n\n  const getPreviousUserTurn = useCallback(\n    (turnIndex: number): UserTurnProps | null => {\n      const turn = runtime.session.turns[turnIndex - 1];\n      return turn?.type === TurnType.USER ? turn : null;\n    },\n    [runtime.session.turns]\n  );\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant);\n  if (!isStyleSheetResolved) return null;\n\n  return (\n    <RuntimeAPIProvider {...runtime}>\n      <ChatWindowContainer className={theme}>\n        <Chat\n          title={assistant.title}\n          description={assistant.description}\n          image={assistant.image}\n          avatar={assistant.avatar}\n          withWatermark={assistant.watermark}\n          startTime={runtime.session.startTime}\n          hasEnded={runtime.isStatus(SessionStatus.ENDED)}\n          isLoading={!runtime.session.turns.length}\n          onStart={handleStart}\n          onEnd={closeAndEnd}\n          onSend={runtime.reply}\n          onMinimize={close}\n        >\n          {runtime.session.turns.map((turn, turnIndex) =>\n            match(turn)\n              .with({ type: TurnType.USER }, ({ id, ...props }) => <UserResponse {...R.omit(props, ['type'])} key={id} />)\n              .with({ type: TurnType.SYSTEM }, ({ id, ...props }) => (\n                <SystemResponse\n                  key={id}\n                  {...R.omit(props, ['type'])}\n                  feedback={\n                    assistant.feedback\n                      ? {\n                          onClick: (feedback: FeedbackName) => {\n                            runtime.feedback(feedback, props.messages, getPreviousUserTurn(turnIndex));\n                          },\n                        }\n                      : undefined\n                  }\n                  avatar={assistant.avatar}\n                  isLast={turnIndex === runtime.session.turns.length - 1}\n                />\n              ))\n              .exhaustive()\n          )}\n          {runtime.indicator && <SystemResponse.Indicator avatar={assistant.avatar} />}\n        </Chat>\n      </ChatWindowContainer>\n    </RuntimeAPIProvider>\n  );\n};\n\nexport default Object.assign(ChatWindow, { Container: ChatWindowContainer });\n","import { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { useRef } from 'react';\n\nimport Avatar from '@/components/Avatar';\nimport Chat from '@/components/Chat';\nimport SystemResponse from '@/components/SystemResponse';\nimport { VF_ICON } from '@/fixtures';\nimport { ChatWidget } from '@/views';\n\nimport Carousel from '.';\n\nconst IMAGE = 'https://source.unsplash.com/featured/248x150';\nconst FIRST_CARD = {\n  title: 'First Card',\n  description: 'Lorem ipsum dolor sit amet',\n  image: IMAGE,\n  actions: [\n    { request: {} as any, name: 'First Button' },\n    { request: {} as any, name: 'Second Button' },\n    { request: {} as any, name: 'Third Button' },\n  ],\n};\nconst MULTIPLE_CARDS = [\n  FIRST_CARD,\n  {\n    title: 'Second Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!',\n    image: IMAGE,\n  },\n  {\n    title: 'Third Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit.',\n    actions: [\n      { request: {} as any, name: 'Fourth Button' },\n      { request: {} as any, name: 'Fifth Button' },\n    ],\n  },\n];\n\nexport default {\n  title: 'Components/Carousel',\n  component: Carousel,\n} as ComponentMeta<typeof Carousel>;\n\nconst Template: ComponentStory<typeof Carousel> = (args) => <Carousel {...args} />;\n\nexport const SingleCard = Template.bind({});\nSingleCard.args = {\n  cards: [FIRST_CARD],\n};\n\nexport const MultipleCards = Template.bind({});\nMultipleCards.args = {\n  cards: MULTIPLE_CARDS,\n};\n\nconst ControlsTemplate: ComponentStory<typeof Carousel> = (args) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <ChatWidget.ChatContainer>\n      <Chat.Dialog>\n        <SystemResponse.Controls ref={controlsRef} />\n        <SystemResponse.Container ref={containerRef} withImage scrollable>\n          <Avatar avatar={VF_ICON} />\n          <Carousel {...args} controlsRef={controlsRef} containerRef={containerRef} />\n        </SystemResponse.Container>\n      </Chat.Dialog>\n    </ChatWidget.ChatContainer>\n  );\n};\n\nexport const WithControls = ControlsTemplate.bind({});\nWithControls.args = {\n  cards: MULTIPLE_CARDS,\n};\n"],"names":["useTheme","assistant","theme","setTheme","useState","useEffect","createCustomTheme","tag","tagFactory","ClassName","CloseContainer","styled","Icon","Close","props","_jsx","MessageContainer","ProactiveMessageContainer","animationStyles","ProactiveContainer","ProactiveQueue","side","isClosed","setIsClosed","React","queue","messages","message","index","match","Trace.TraceType","TEXT","payload","_jsxs","ChatPosition","Proactive","Message","addStyleSheetURL","url","link","load","resolve","reject","useResolveAssistantStyleSheet","isStyleSheetResolved","setStyleSheetResolved","error","CHAT_WIDTH","MAX_CHAT_HEIGHT","ChatContainer","LauncherContainer","animateInStyles","animateOutStyles","Container","ChatWidget","children","chatAPI","sendMessage","isOpen","setOpen","isHidden","setHidden","proactiveMessages","setProactiveMessages","isMobile","useMemo","window","matchMedia","matches","Listeners","PostMessage","CLOSE","OPEN","open","useCallback","type","close","isObject","Object","assign","hide","show","interact","action","ACTION_REQUEST","proactive","clear","push","prev","noop","position","RIGHT","bottom","spacing","Launcher","launcher","ChatWidget$1","ChatWindowContainer","Chat","ChatWindow","versionID","verify","user","session","launch","saveSession","SAVE_SESSION","runtime","useRuntime","isStatus","SessionStatus","IDLE","handleStart","closeAndEnd","setStatus","ENDED","getPreviousUserTurn","turnIndex","turn","turns","TurnType","USER","RuntimeAPIProvider","title","description","image","avatar","watermark","startTime","length","reply","map","with","id","UserResponse","R","SYSTEM","SystemResponse","feedback","onClick","undefined","exhaustive","indicator","IMAGE","FIRST_CARD","actions","request","name","MULTIPLE_CARDS","Carousel_story","component","Carousel","Template","args","SingleCard","bind","cards","MultipleCards","ControlsTemplate","containerRef","useRef","controlsRef","Avatar","VF_ICON","WithControls"],"mappings":"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"}