{"version":3,"file":"index.aebdaf40.js","sources":["../../src/components/Carousel/styled.ts","../../src/components/Carousel/CarouselButton.tsx","../../src/components/Carousel/constants.ts","../../src/components/Carousel/hooks.ts","../../src/components/Carousel/index.tsx"],"sourcesContent":["import Card from '@/components/Card';\nimport Icon from '@/components/Icon';\nimport { styled } from '@/styles';\n\nconst BUTTON_SIZE = 42;\nexport const CAROUSEL_GUTTER_WIDTH = 12;\n\nexport const ButtonContainer = styled('span', {\n  position: 'absolute',\n  zIndex: 1,\n\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  borderRadius: '$round',\n  trans: ['background-color', 'box-shadow', 'opacity'],\n\n  height: BUTTON_SIZE,\n  width: BUTTON_SIZE,\n  cursor: 'pointer',\n  backgroundColor: '$white',\n  color: '$black',\n  boxShadow: '0 1px 3px 1px $shadow1, 0 0 0 1px $shadow3, 0 2px 4px -3px $shadow12, 0 5px 8px -8px $shadow12',\n  border: 'none',\n\n  [`& ${Icon.Frame}`]: {\n    height: '$xxs',\n    width: '$xxs',\n    color: 'rgba(0,0,0,0.6)',\n    trans: ['color'],\n  },\n\n  [`&:hover`]: {\n    boxShadow: '0 1px 4px 1px $shadow4, 0 0 0 1px $shadow4, 0 2px 4px -3px $shadow12, 0 5px 8px -8px $shadow12',\n  },\n\n  [`&:active`]: {\n    boxShadow: '0 1px 4px 1px $shadow8, 0 0 0 1px $shadow4, 0 2px 4px -3px $shadow12, 0 5px 8px -8px $shadow12',\n  },\n\n  [`\n      &:hover ${Icon.Frame},\n      &:active ${Icon.Frame}\n    `]: {\n    color: 'rgba(0,0,0,0.8)',\n  },\n\n  variants: {\n    visible: {\n      true: {\n        opacity: 1,\n        pointerEvents: 'auto',\n      },\n      false: {\n        opacity: 0,\n        pointerEvents: 'none',\n      },\n    },\n    alignment: {\n      left: {\n        left: 48 - BUTTON_SIZE / 2,\n      },\n      right: {\n        right: 70 - BUTTON_SIZE / 2,\n\n        [`& ${Icon.Frame}`]: {\n          transform: 'scaleX(-1)',\n        },\n      },\n    },\n  },\n});\n\nexport const Container = styled('div', {\n  display: 'flex',\n  whiteSpace: 'nowrap',\n\n  [`& ${Card.Container}`]: {\n    height: 'fit-content',\n    flexShrink: 0,\n    marginLeft: CAROUSEL_GUTTER_WIDTH,\n\n    '&:first-of-type': {\n      marginLeft: 0,\n    },\n  },\n});\n","import { forwardRef } from 'react';\n\nimport Icon from '@/components/Icon';\n\nimport { ButtonContainer } from './styled';\n\nexport interface CarouselButtonProps {\n  onClick?: VoidFunction;\n  alignment: 'left' | 'right';\n  visible: boolean;\n  containerEl: HTMLElement;\n}\n\nconst CarouselButton = forwardRef<HTMLElement, CarouselButtonProps>(({ onClick, alignment, visible, containerEl }, ref) => (\n  <ButtonContainer\n    ref={ref}\n    alignment={alignment}\n    visible={visible}\n    css={{\n      transform: `translateY(calc(${containerEl.clientHeight / 2}px - 50%))`,\n    }}\n    onClick={onClick}\n  >\n    <Icon svg=\"largeArrowLeft\" />\n  </ButtonContainer>\n));\n\nexport default CarouselButton;\n","import { CARD_WIDTH } from '@/components/Card/styled';\n\nimport { CAROUSEL_GUTTER_WIDTH } from './styled';\n\nexport const CARD_WITH_BORDER_WIDTH = CARD_WIDTH + 2;\nexport const PREVIOUS_CONTROL_BOUNDARY = CARD_WITH_BORDER_WIDTH / 3;\nexport const NEXT_CONTROL_BOUNDARY = CARD_WITH_BORDER_WIDTH + CAROUSEL_GUTTER_WIDTH + PREVIOUS_CONTROL_BOUNDARY;\nexport const CARD_WITH_GUTTER_WIDTH = CARD_WITH_BORDER_WIDTH + CAROUSEL_GUTTER_WIDTH;\n","import { RefObject, useEffect, useRef, useState } from 'react';\n\nimport { CardProps } from '../Card';\nimport { CARD_WITH_GUTTER_WIDTH, NEXT_CONTROL_BOUNDARY, PREVIOUS_CONTROL_BOUNDARY } from './constants';\nimport { CAROUSEL_GUTTER_WIDTH } from './styled';\n\nexport const useScrollTo =\n  <T extends HTMLElement>(ref: RefObject<T> | undefined, getNextIndex: (el: T) => number) =>\n  () => {\n    const el = ref?.current;\n    if (!el) return;\n\n    const index = getNextIndex(el);\n\n    el.scrollTo({\n      left: index && index * CARD_WITH_GUTTER_WIDTH,\n      behavior: 'smooth',\n    });\n  };\n\nexport const useScrollObserver = (\n  containerRef: RefObject<HTMLDivElement> | undefined,\n  controlsRef: RefObject<HTMLSpanElement> | undefined,\n  cards: CardProps[]\n) => {\n  const [showPreviousButton, setShowPreviousButton] = useState(false);\n  const [showNextButton, setShowNextButton] = useState(false);\n  const previousButtonRef = useRef<HTMLButtonElement>(null);\n  const nextButtonRef = useRef<HTMLButtonElement>(null);\n  const hasMultipleCards = cards.length > 1;\n\n  useEffect(() => {\n    if (!controlsRef?.current || !hasMultipleCards) return;\n\n    setShowNextButton(true);\n  }, []);\n\n  useEffect(() => {\n    const containerEl = containerRef?.current;\n    if (!containerEl || !hasMultipleCards) return undefined;\n\n    const trackWidth = CARD_WITH_GUTTER_WIDTH * cards.length - CAROUSEL_GUTTER_WIDTH;\n\n    const handleScroll = (): void => {\n      const { scrollLeft } = containerEl;\n\n      setShowPreviousButton(scrollLeft >= PREVIOUS_CONTROL_BOUNDARY);\n      setShowNextButton(scrollLeft <= trackWidth - NEXT_CONTROL_BOUNDARY);\n    };\n\n    containerEl.addEventListener('scroll', handleScroll);\n\n    return () => {\n      containerEl.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  return {\n    previousButtonRef,\n    nextButtonRef,\n    showPreviousButton,\n    showNextButton,\n  };\n};\n","import { RefObject } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { SendMessage } from '@/common';\nimport Card, { CardProps } from '@/components/Card';\n\nimport CarouselButton from './CarouselButton';\nimport { CARD_WITH_GUTTER_WIDTH } from './constants';\nimport { useScrollObserver, useScrollTo } from './hooks';\nimport { Container } from './styled';\n\nexport interface CarouselProps {\n  send?: SendMessage | undefined;\n  cards: CardProps[];\n  containerRef?: RefObject<HTMLDivElement>;\n  controlsRef?: RefObject<HTMLSpanElement>;\n}\n\nconst Carousel: React.FC<CarouselProps> = ({ cards, containerRef, controlsRef, send }) => {\n  const { previousButtonRef, nextButtonRef, showPreviousButton, showNextButton } = useScrollObserver(containerRef, controlsRef, cards);\n  const containerEl = containerRef?.current;\n  const controlsEl = controlsRef?.current;\n  const showControls = containerEl && controlsEl;\n\n  const scrollToPrevious = useScrollTo(containerRef, (el) => Math.ceil(el.scrollLeft / CARD_WITH_GUTTER_WIDTH) - 1);\n  const scrollToNext = useScrollTo(containerRef, (el) => Math.floor(el.scrollLeft / CARD_WITH_GUTTER_WIDTH) + 1);\n\n  return (\n    <>\n      <Container>\n        {cards.map((card, index) => (\n          <Card send={send} {...card} key={index} />\n        ))}\n      </Container>\n      {showControls &&\n        createPortal(\n          <>\n            <CarouselButton\n              ref={previousButtonRef}\n              alignment=\"left\"\n              visible={showPreviousButton}\n              containerEl={containerEl}\n              onClick={scrollToPrevious}\n            />\n            <CarouselButton ref={nextButtonRef} alignment=\"right\" visible={showNextButton} containerEl={containerEl} onClick={scrollToNext} />\n          </>,\n          controlsEl\n        )}\n    </>\n  );\n};\n\nexport default Object.assign(Carousel, {\n  Container,\n});\n"],"names":["BUTTON_SIZE","CAROUSEL_GUTTER_WIDTH","ButtonContainer","styled","Icon","Container","Card","CarouselButton","forwardRef","onClick","alignment","visible","ref","_jsx","containerEl","CARD_WITH_BORDER_WIDTH","CARD_WIDTH","PREVIOUS_CONTROL_BOUNDARY","NEXT_CONTROL_BOUNDARY","CARD_WITH_GUTTER_WIDTH","useScrollTo","getNextIndex","el","index","useScrollObserver","containerRef","controlsRef","cards","showPreviousButton","setShowPreviousButton","useState","showNextButton","setShowNextButton","previousButtonRef","useRef","nextButtonRef","hasMultipleCards","useEffect","trackWidth","handleScroll","scrollLeft","Carousel","controlsEl","showControls","scrollToPrevious","scrollToNext","_jsxs","_Fragment","card","_createElement","send","createPortal","Carousel$1"],"mappings":"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"}