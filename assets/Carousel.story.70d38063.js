import{r as s,j as n,R,a as C}from"./jsx-runtime.abe5e356.js";import{A as J}from"./index.8e333094.js";import{K as B,C as O,U as ee,o as P,S as v,a as b}from"./index.f2f1d1cc.js";import{V as te}from"./fixtures.e9667a2d.js";import{b as oe,t as x,C as E,s as l,a as se,d as ne}from"./animation.30c7c551.js";import{d as re,e as N,R as Y,f as q,S as $,g as T}from"./index.23ac3464.js";import"./index.484a71f2.js";import{L as D}from"./index.de78a236.js";import{I as j}from"./index.2f17b6b6.js";import{n as p}from"./index.be96f1ac.js";import"./index.61b03e5e.js";import"./index.b5f1f11b.js";import"./index.91323e6c.js";import"./index.f5a46f90.js";import"./index.fb5b56c4.js";import"./index.08344f9b.js";import"./index.024a584a.js";import"./index.bc2ec739.js";import"./index.0c6ab9cb.js";import"./index.9dce4f88.js";import"./index.1b9b089f.js";import"./iframe.4c626fcd.js";import"./index.90da5745.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.96fa374d.js";import"./variants.52d78cca.js";const ae=e=>{const[t,o]=s.exports.useState("");return s.exports.useEffect(()=>{e!=null&&e.color&&o(oe({color:e.color}))},[e==null?void 0:e.color]),t};function ie(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}const ce=x(E.PROACTIVE_CLOSE),u=l(ce("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${j.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),H=({...e})=>n(u,{...e,children:n(j,{svg:"closeV2"})});try{u.displayName="CloseContainer",u.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:u.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const le=x(E.PROACTIVE_MESSAGE),h=l(le("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{h.displayName="MessageContainer",h.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:h.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const de=x(E.PROACTIVE),y=l("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${h}`]:{...se({duration:150,delay:0})}}),_=l(de("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${u}`]:{opacity:0},["&:hover"]:{[`& ${u}`]:{opacity:1}}}),pe=({side:e,messages:t})=>{const[o,a]=R.useState(!1),i=R.useMemo(()=>t.map((d,r)=>B(d).with({type:re.TEXT},({payload:c})=>n(h,{children:String(c.message)},r)).otherwise(()=>null)),[t]);return R.useEffect(()=>{!i.length||a(!1)},[i]),o||!i.length?null:C(_,{style:{[e]:0,alignItems:e===N.ChatPosition.LEFT?"start":"end"},children:[n(H,{onClick:()=>a(!0)}),n(y,{children:i})]})},me=Object.assign(pe,{Message:h,Close:H});try{y.displayName="ProactiveMessageContainer",y.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:y.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{_.displayName="ProactiveContainer",_.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:_.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const ue=async e=>{const t=document.createElement("link"),o=new Promise((a,i)=>{t.onload=a,t.onerror=i});t.rel="stylesheet",t.href=e,ne.appendChild(t),await o},he=e=>{const[t,o]=s.exports.useState(!1);return s.exports.useEffect(()=>{if(!(!e||t)){if(!e.stylesheet){o(!0);return}(async()=>(await ue(e.stylesheet).catch(a=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(a)}),o(!0)))()}},[e]),t};const K=l("div",{height:"100%",[`& ${O.Container}`]:{height:"100%"}}),Ce=()=>{const e=s.exports.useContext(Y),t=s.exports.useContext(q),{assistant:o}=e,a=s.exports.useCallback(()=>{e.setStatus($.ENDED),e.close()},[]),i=s.exports.useCallback(d=>{const r=t.session.turns[d-1];return(r==null?void 0:r.type)===T.USER?r:null},[t.session.turns]);return n(K,{children:C(O,{title:o.title,description:o.description,image:o.image,avatar:o.avatar,withWatermark:o.watermark,startTime:t.session.startTime,hasEnded:e.isStatus($.ENDED),isLoading:!t.session.turns.length,onStart:e.launch,onEnd:a,onSend:e.reply,onMinimize:e.close,children:[t.session.turns.map((d,r)=>B(d).with({type:T.USER},({id:c,...m})=>s.exports.createElement(ee,{...P(m,["type"]),key:c})).with({type:T.SYSTEM},({id:c,...m})=>n(v,{...P(m,["type"]),feedback:o.feedback?{onClick:S=>{e.feedback(S,m.messages,i(r))}}:void 0,avatar:o.avatar,isLast:r===t.session.turns.length-1},c)).exhaustive()),t.indicator&&n(v.Indicator,{avatar:o.avatar})]})})},ge=Object.assign(Ce,{Container:K}),fe=380,Se=800,M=x(E.WIDGET),g=l(M("div","chat"),{width:fe,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:Se,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),f=l(M("div","launcher"),{}),L={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},k={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},V=l(M("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${f},
    & > ${g}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${g}`]:{...L},[`& > ${f}`]:{...k}},false:{[`& > ${g}`]:{...k},[`& > ${f}`]:{...L}}},isHidden:{true:{display:"none"}}}}),ye=({chatAPI:e})=>{var I;const{assistant:t,open:o,close:a,interact:i}=s.exports.useContext(Y),{isOpen:d}=s.exports.useContext(q),[r,c]=s.exports.useState(!1),[m,S]=s.exports.useState([]),G=s.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),X=ae(t);s.exports.useEffect(()=>{if(!!ie(e))return Object.assign(e,{open:o,close:a,hide:()=>c(!0),show:()=>c(!1),interact:i,proactive:{clear:()=>S([]),push:(...Z)=>S(Q=>[...Q,...Z])}}),()=>{Object.assign(e,{open:p,hide:p,show:p,close:p,interact:p,proactive:{clear:p,push:p}})}},[]);const A=(I=t==null?void 0:t.position)!=null?I:N.ChatPosition.RIGHT,w={bottom:t==null?void 0:t.spacing.bottom,[A]:t==null?void 0:t.spacing.side};return he(t)?C(V,{withChat:d,isHidden:r,className:X,children:[!!t&&C(f,{style:w,children:[n(me,{side:A,messages:m}),n(D,{onClick:o,image:t.launcher})]}),n(g,{style:G?{}:w,children:n(ge,{})})]}):null},_e=Object.assign(ye,{Launcher:D,Container:V,ChatContainer:g,LauncherContainer:f}),W="https://source.unsplash.com/featured/248x150",F={title:"First Card",description:"Lorem ipsum dolor sit amet",image:W,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},U=[F,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:W},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Qe={title:"Components/Carousel",component:b},z=e=>n(b,{...e}),ve=z.bind({});ve.args={cards:[F]};const xe=z.bind({});xe.args={cards:U};const Ee=e=>{const t=s.exports.useRef(null),o=s.exports.useRef(null);return n(_e.ChatContainer,{children:C(O.Dialog,{children:[n(v.Controls,{ref:o}),C(v.Container,{ref:t,withImage:!0,scrollable:!0,children:[n(J,{avatar:te}),n(b,{...e,controlsRef:o,containerRef:t})]})]})})},Re=Ee.bind({});Re.args={cards:U};export{xe as MultipleCards,ve as SingleCard,Re as WithControls,Qe as default};
//# sourceMappingURL=Carousel.story.70d38063.js.map
