import{j as r}from"./jsx-runtime-DRTy3Uxn.js";import{r as a,R as b}from"./index-BBkUAzwr.js";import{A as ye}from"./index-B0bdE4-u.js";import{K as ee,C as A,U as ve,o as k,S as R,a as te}from"./index-ud4dS2Zj.js";import{V as Se,M as _e}from"./fixtures-BG8dVRKH.js";import"./index-CTxelje9.js";import{T as xe,c as Re,a as $,b as se,S as I,d as M}from"./index-CXNoADHz.js";import{c as Ee,s as p,a as we}from"./animation-I98MwHEk.js";import"./index-60JQpial.js";import"./index-BMZibWur.js";import"./index-DqzWDvut.js";import{I as oe}from"./index-D1YpC07r.js";import"./index-Ct8JKvm2.js";import"./index-DNVrYBWV.js";import{L as re}from"./index-B3Lb_eZg.js";import"./index-BOwkVC01.js";import"./index-C7PXvV03.js";import{C as E}from"./constants-CnzOgqsw.js";import{t as w}from"./tag-CD_1nE8q.js";import"./index-CcHdfiB1.js";import"./index-BK1IyiUZ.js";import"./index-NQ2LSDJG.js";import"./index-5hZA7nZO.js";import"./functional-ii7S4iDS.js";import"./index-PqR-_bA4.js";import"./device-WPWeBsw9.js";import"./_createSet-zuc-p8Rl.js";import"./_baseToString-BV3LLLfG.js";import"./is-plain-object-BrWfeXm7.js";import"./variants-BbyesEZ0.js";import"./top-caret-CFqa3nzJ.js";function be(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}const q=e=>{const t=s=>()=>console.warn(e(s));return{open:t("open"),hide:t("hide"),show:t("show"),close:t("close"),interact:t("interact"),proactive:{clear:t("proactive.clear"),push:t("proactive.push")}}},ae=(e,t,s)=>a.useEffect(()=>{if(!be(e))return;const o=q(i=>`Method '${i}' has no effect in this mode.`),n=t();return Object.assign(e,{...o,...n,proactive:{...o.proactive,...n.proactive}}),s==null||s(),()=>{const i=q(c=>`Method '${c}' has no effect after 'destroy' has been called. Call 'load' to render the chat and restore this method.`);Object.assign(e,i)}},[]),ne=e=>{const[t,s]=a.useState("");return a.useEffect(()=>{e!=null&&e.color&&s(Ee({color:e.color}))},[e==null?void 0:e.color]),t},Ie=async(e,t)=>{const s=document.createElement("link"),o=new Promise((n,i)=>{s.onload=n,s.onerror=i});s.rel="stylesheet",s.href=e,t.appendChild(s),await o},ie=(e,t)=>{const[s,o]=a.useState(!1);return a.useEffect(()=>{if(!e||s)return;if(!e.stylesheet){o(!0);return}const n=Array.isArray(e.stylesheet)?e.stylesheet[0]:e.stylesheet;(async()=>(await Ie(n,t??document.head).catch(i=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(i)}),o(!0)))()},[e]),s},Me=w(E.PROACTIVE_CLOSE),g=p(Me("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${oe.Frame}`]:{width:10,height:10},"&:hover, &:active":{color:"#2B3239"}}),ce=({...e})=>r.jsx(g,{...e,children:r.jsx(oe,{svg:"closeV2"})});try{g.displayName="CloseContainer",g.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const Te=w(E.PROACTIVE_MESSAGE),C=p(Te("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{C.displayName="MessageContainer",C.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const je=w(E.PROACTIVE),T=p("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${C}`]:{...we({duration:150,delay:0})}}),j=p(je("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${g}`]:{opacity:0},"&:hover":{[`& ${g}`]:{opacity:1}}}),Ae=({side:e,messages:t})=>{const[s,o]=b.useState(!1),n=b.useMemo(()=>t.map((i,c)=>ee(i).with({type:xe.TEXT},({payload:l})=>r.jsx(C,{children:String(l.message)},c)).otherwise(()=>null)),[t]);return b.useEffect(()=>{n.length&&o(!1)},[n]),s||!n.length?null:r.jsxs(j,{style:{[e]:0,alignItems:e===Re.ChatPosition.LEFT?"start":"end"},children:[r.jsx(ce,{onClick:()=>o(!0)}),r.jsx(T,{children:n})]})},$e=Object.assign(Ae,{Message:C,Close:ce});try{T.displayName="ProactiveMessageContainer",T.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}try{j.displayName="ProactiveContainer",j.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const le=p("div",{height:"100%",[`& ${A.Container}`]:{height:"100%"}}),Le=({className:e})=>{const t=a.useContext($),s=a.useContext(se),{assistant:o,config:n}=t,i=a.useCallback(()=>{t.setStatus(I.ENDED),t.close()},[]),c=a.useCallback(l=>{const d=s.session.turns[l-1];return(d==null?void 0:d.type)===M.USER?d:null},[s.session.turns]);return r.jsx(le,{className:e,children:r.jsxs(A,{title:o.title,description:o.description,image:o.image,avatar:o.avatar,withWatermark:o.watermark,startTime:s.session.startTime,hasEnded:t.isStatus(I.ENDED),isLoading:t.isStatus(I.IDLE)&&s.session.turns.length===0&&n.autostart,onStart:t.launch,onEnd:i,onSend:t.reply,onMinimize:t.close,audioInterface:o.audioInterface,children:[s.session.turns.map((l,d)=>ee(l).with({type:M.USER},({id:u,...m})=>a.createElement(ve,{...k(m,["type"]),key:u})).with({type:M.SYSTEM},({id:u,...m})=>r.jsx(R,{...k(m,["type"]),feedback:o.feedback?{onClick:y=>{t.feedback(y,m.messages,c(d))}}:void 0,avatar:o.avatar,isLast:d===s.session.turns.length-1},u)).exhaustive()),s.indicator&&r.jsx(R.Indicator,{avatar:o.avatar})]})})},de=Object.assign(Le,{Container:le}),O=({shadowRoot:e,chatAPI:t,ready:s})=>{const{assistant:o,interact:n,open:i}=a.useContext($),c=ne(o),l=ie(o,e);return ae(t,()=>(console.info("Methods open, close, hide, show, proactive.clear, proactive.push have no effect in this mode."),{interact:n}),s),a.useEffect(()=>{i()},[]),l?r.jsx(de,{className:c}):null};try{O.displayName="ChatEmbed",O.__docgenInfo={description:"",displayName:"ChatEmbed",props:{shadowRoot:{defaultValue:null,description:"",name:"shadowRoot",required:!0,type:{name:"ShadowRoot"}},chatAPI:{defaultValue:null,description:"",name:"chatAPI",required:!0,type:{name:"any"}},ready:{defaultValue:null,description:"",name:"ready",required:!1,type:{name:"() => void"}}}}}catch{}const Pe=380,De=800,L=w(E.WIDGET),h=p(L("div","chat"),{width:Pe,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:De,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),f=p(L("div","launcher"),{}),V={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},W={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},pe=p(L("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${f},
    & > ${h}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${h}`]:{...V},[`& > ${f}`]:{...W}},false:{[`& > ${h}`]:{...W},[`& > ${f}`]:{...V}}},isHidden:{true:{display:"none"}}}}),Ne=({shadowRoot:e,chatAPI:t,ready:s})=>{const{assistant:o,open:n,close:i,interact:c}=a.useContext($),{isOpen:l}=a.useContext(se),[d,u]=a.useState(!1),[m,y]=a.useState([]),he=a.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),fe=ne(o);ae(t,()=>({open:n,close:i,hide:()=>u(!0),show:()=>u(!1),interact:c,proactive:{clear:()=>y([]),push:(...ge)=>y(Ce=>[...Ce,...ge])}}),s);const D=o.position,N={bottom:o.spacing.bottom,[D]:o.spacing.side};return ie(o,e)?r.jsxs(pe,{withChat:l,isHidden:d,className:fe,children:[r.jsxs(f,{style:N,children:[r.jsx($e,{side:D,messages:m}),r.jsx(re,{onClick:n,image:o.launcher})]}),r.jsx(h,{style:he?{}:N,children:r.jsx(de,{})})]}):null},ke=Object.assign(Ne,{Launcher:re,Container:pe,ChatContainer:h,LauncherContainer:f}),gt={component:te,title:"Components/Carousel"},ue=_e,me={title:"First Card",description:"Lorem ipsum dolor sit amet",image:ue,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},P=[me,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:ue},{title:"Third Card with a long title that wraps",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button with a long label that wraps"},{request:{},name:"Fifth Button"}]}],v={args:{cards:[me]}},S={args:{cards:P}},_={args:{cards:P},render:e=>{const t=a.useRef(null),s=a.useRef(null);return r.jsx(ke.ChatContainer,{children:r.jsxs(A.Dialog,{children:[r.jsx(R.Controls,{ref:s}),r.jsxs(R.Container,{ref:t,withImage:!0,scrollable:!0,children:[r.jsx(ye,{avatar:Se}),r.jsx(te,{...e,controlsRef:s,containerRef:t})]})]})})}},x={args:{cards:P}};var H,F,U;v.parameters={...v.parameters,docs:{...(H=v.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    cards: [FIRST_CARD]
  }
}`,...(U=(F=v.parameters)==null?void 0:F.docs)==null?void 0:U.source}}};var z,B,G;S.parameters={...S.parameters,docs:{...(z=S.parameters)==null?void 0:z.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  }
}`,...(G=(B=S.parameters)==null?void 0:B.docs)==null?void 0:G.source}}};var Y,K,X;_.parameters={..._.parameters,docs:{...(Y=_.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  },
  render: args => {
    const containerRef = useRef<HTMLDivElement>(null);
    const controlsRef = useRef<HTMLDivElement>(null);
    return <ChatWidget.ChatContainer>
        <Chat.Dialog>
          <SystemResponse.Controls ref={controlsRef} />
          <SystemResponse.Container ref={containerRef} withImage scrollable>
            <Avatar avatar={VF_ICON} />
            <Carousel {...args} controlsRef={controlsRef} containerRef={containerRef} />
          </SystemResponse.Container>
        </Chat.Dialog>
      </ChatWidget.ChatContainer>;
  }
}`,...(X=(K=_.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};var Z,Q,J;x.parameters={...x.parameters,docs:{...(Z=x.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  }
}`,...(J=(Q=x.parameters)==null?void 0:Q.docs)==null?void 0:J.source}}};export{_ as ControlsTemplate,S as MultipleCards,v as SingleCard,x as WithControls,gt as default};
