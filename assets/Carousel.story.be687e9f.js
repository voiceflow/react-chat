import{r as a,j as s,R as x,a as y}from"./jsx-runtime.c317c54f.js";import{A as re}from"./index.19834b3a.js";import{K as F,c as W,u as k,T as d,i as ae,C as B,s as V,a as ie,S as $,b as N,U as ce,o as H,d as I,e as D}from"./index.d59efc8d.js";import{V as le}from"./fixtures.e9667a2d.js";import{b as de,t as A,C as P,s as p,a as pe}from"./theme.1a4e0a54.js";import"./index.484a71f2.js";import{L as U}from"./index.f1a8e7aa.js";import{T as me}from"./index.05dec87e.js";import{I as z}from"./index.c997a86d.js";import{n as u}from"./index.c818b44e.js";import"./index.75d143a9.js";import"./index.26e52f01.js";import{c as ue}from"./index.e3e55a7a.js";import"./index.bdb97da4.js";import"./index.251604ec.js";import"./index.50f3975e.js";import"./index.9bbfb865.js";import"./index.b7714191.js";import"./index.261b6358.js";import"./index.6819a2e5.js";import"./iframe.17bd6b1f.js";import"./index.3ab3393c.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.23c928d4.js";import"./variants.7a24a167.js";const G=e=>{const[t,n]=a.exports.useState("");return a.exports.useEffect(()=>{e!=null&&e.color&&n(de({color:e.color}))},[e==null?void 0:e.color]),t},he=A(P.PROACTIVE_CLOSE),g=p(he("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${z.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),Q=({...e})=>s(g,{...e,children:s(z,{svg:"closeV2"})});try{g.displayName="CloseContainer",g.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:g.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const Ce=A(P.PROACTIVE_MESSAGE),S=p(Ce("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{S.displayName="MessageContainer",S.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:S.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const fe=A(P.PROACTIVE),b=p("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${S}`]:{...pe({duration:150,delay:0})}}),M=p(fe("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${g}`]:{opacity:0},["&:hover"]:{[`& ${g}`]:{opacity:1}}}),ge=({side:e,messages:t})=>{const[n,o]=x.useState(!1),i=x.useMemo(()=>t.map((h,C)=>F(h).with({type:me.TEXT},({payload:f})=>s(S,{children:String(f.message)},C)).otherwise(()=>null)),[t]);return x.useEffect(()=>{!i.length||o(!1)},[i]),n||!i.length?null:y(M,{style:{[e]:0,alignItems:e===W.ChatPosition.LEFT?"start":"end"},children:[s(Q,{onClick:()=>o(!0)}),s(b,{children:i})]})},Se=Object.assign(ge,{Message:S,Close:Q});try{b.displayName="ProactiveMessageContainer",b.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:b.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{M.displayName="ProactiveContainer",M.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:M.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const ye=async e=>{const t=document.createElement("link"),n=new Promise((o,i)=>{t.onload=o,t.onerror=i});t.rel="stylesheet",t.href=e,document.head.appendChild(t),await n},X=e=>{const[t,n]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(!(!e||t)){if(!e.stylesheet){n(!0);return}(async()=>(await ye(e.stylesheet).catch(o=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(o)}),n(!0)))()}},[e]),t},_e=380,ve=800,Y=A(P.WIDGET),T=p(Y("div","chat"),{width:_e,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ve,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),O=p(Y("div","launcher"),{}),K={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},j={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},Z=p(Y("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${O},
    & > ${T}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${T}`]:{...K},[`& > ${O}`]:{...j}},false:{[`& > ${T}`]:{...j},[`& > ${O}`]:{...K}}},isHidden:{true:{display:"none"}}}}),Ee=({children:e,chatAPI:t,sendMessage:n,assistant:o})=>{var m;const[i,h]=a.exports.useState(!1),[C,f]=a.exports.useState(!1),[r,_]=a.exports.useState([]),w=a.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),L=G(o);k(d.CLOSE,()=>h(!1)),k(d.OPEN,()=>h(!0));const R=x.useCallback(()=>n({type:d.OPEN}),[]),q=x.useCallback(()=>n({type:d.CLOSE}),[]);a.exports.useEffect(()=>{if(!!ae(t))return Object.assign(t,{open:R,close:q,hide:()=>f(!0),show:()=>f(!1),interact:E=>n({type:d.ACTION_REQUEST,payload:{action:E}}),proactive:{clear:()=>_([]),push:(...E)=>_(se=>[...se,...E])}}),()=>{Object.assign(t,{open:u,hide:u,show:u,close:u,interact:u,proactive:{clear:u,push:u}})}},[]);const l=(m=o==null?void 0:o.position)!=null?m:W.ChatPosition.RIGHT,c={bottom:o==null?void 0:o.spacing.bottom,[l]:o==null?void 0:o.spacing.side},v=X(o);return y(Z,{withChat:i,isHidden:C,className:L,children:[!!o&&v&&y(O,{style:c,children:[s(Se,{side:l,messages:r}),s(U,{onClick:R,image:o.launcher})]}),s(T,{style:w?{}:c,children:e})]})},xe=Object.assign(Ee,{Launcher:U,Container:Z,ChatContainer:T,LauncherContainer:O});const J=p("div",{height:"100%",[`& ${B.Container}`]:{height:"100%"}}),Te=({assistant:e,versionID:t,verify:n,user:o,url:i,session:h})=>{const C=a.exports.useCallback(()=>V({type:d.CLOSE}),[]),f=a.exports.useCallback(l=>V({type:d.SAVE_SESSION,payload:l}),[]),r=ie({versionID:t,verify:n,url:i,user:o,session:h,saveSession:f});k(d.OPEN,async()=>{r.isStatus($.IDLE)&&await _()});const _=async()=>{await r.launch()},w=a.exports.useCallback(()=>{r.setStatus($.ENDED),C()},[]),L=G(e),R=a.exports.useCallback(l=>{const c=r.session.turns[l-1];return(c==null?void 0:c.type)===N.USER?c:null},[r.session.turns]);return X(e)?s(ue,{...r,children:s(J,{className:L,children:y(B,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:r.session.startTime,hasEnded:r.isStatus($.ENDED),isLoading:!r.session.turns.length,onStart:_,onEnd:w,onSend:r.reply,onMinimize:C,children:[r.session.turns.map((l,c)=>F(l).with({type:N.USER},({id:v,...m})=>a.exports.createElement(ce,{...H(m,["type"]),key:v})).with({type:N.SYSTEM},({id:v,...m})=>s(I,{...H(m,["type"]),feedback:e.feedback?{onClick:E=>{r.feedback(E,m.messages,R(c))}}:void 0,avatar:e.avatar,isLast:c===r.session.turns.length-1},v)).exhaustive()),r.indicator&&s(I.Indicator,{avatar:e.avatar})]})})}):null};Object.assign(Te,{Container:J});const ee="https://source.unsplash.com/featured/248x150",te={title:"First Card",description:"Lorem ipsum dolor sit amet",image:ee,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},oe=[te,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:ee},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],et={title:"Components/Carousel",component:D},ne=e=>s(D,{...e}),Oe=ne.bind({});Oe.args={cards:[te]};const Re=ne.bind({});Re.args={cards:oe};const be=e=>{const t=a.exports.useRef(null),n=a.exports.useRef(null);return s(xe.ChatContainer,{children:y(B.Dialog,{children:[s(I.Controls,{ref:n}),y(I.Container,{ref:t,withImage:!0,scrollable:!0,children:[s(re,{avatar:le}),s(D,{...e,controlsRef:n,containerRef:t})]})]})})},Me=be.bind({});Me.args={cards:oe};export{Re as MultipleCards,Oe as SingleCard,Me as WithControls,et as default};
//# sourceMappingURL=Carousel.story.be687e9f.js.map
