import{r as a,j as r,R as v,a as y}from"./jsx-runtime.f29aec26.js";import{A as re}from"./index.c0dc6bb9.js";import{K as W,c as U,u as D,T as p,i as ae,C as Y,s as H,a as ie,S as k,b as B,U as ce,o as K,d as M,e as q}from"./index.5cc70c05.js";import{V as le}from"./fixtures.e9667a2d.js";import{b as de,t as I,C as A,s as m,a as pe}from"./theme.bb9f5a97.js";import"./index.484a71f2.js";import{L as z}from"./index.abb9b685.js";import{T as me}from"./index.e157a460.js";import{I as G}from"./index.b56e5d5e.js";import{n as h}from"./index.b9b678b6.js";import"./index.3fb9e86b.js";import"./index.57c5ab45.js";import{c as ue}from"./index.101fc91f.js";import"./index.9b426b1c.js";import"./index.61096c7f.js";import"./index.89640b6f.js";import"./index.f6dcf3d9.js";import"./index.de46292d.js";import"./index.c2cf0755.js";import"./index.ed5f0b33.js";import"./iframe.895f77cb.js";import"./index.9451bb2d.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.5f0d0149.js";import"./variants.b45822ee.js";const Q=e=>{const[t,n]=a.exports.useState("");return a.exports.useEffect(()=>{e!=null&&e.color&&n(de({color:e.color}))},[e==null?void 0:e.color]),t},he=I(A.PROACTIVE_CLOSE),g=m(he("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${G.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),X=({...e})=>r(g,{...e,children:r(G,{svg:"closeV2"})});try{g.displayName="CloseContainer",g.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:g.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const Ce=I(A.PROACTIVE_MESSAGE),S=m(Ce("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{S.displayName="MessageContainer",S.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:S.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const fe=I(A.PROACTIVE),R=m("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${S}`]:{...pe({duration:150,delay:0})}}),b=m(fe("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${g}`]:{opacity:0},["&:hover"]:{[`& ${g}`]:{opacity:1}}}),ge=({side:e,messages:t})=>{const[n,o]=v.useState(!1),i=v.useMemo(()=>t.map((C,_)=>W(C).with({type:me.TEXT},({payload:u})=>r(S,{children:String(u.message)},_)).otherwise(()=>null)),[t]);return v.useEffect(()=>{!i.length||o(!1)},[i]),n||!i.length?null:y(b,{style:{[e]:0,alignItems:e===U.ChatPosition.LEFT?"start":"end"},children:[r(X,{onClick:()=>o(!0)}),r(R,{children:i})]})},Se=Object.assign(ge,{Message:S,Close:X});try{R.displayName="ProactiveMessageContainer",R.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:R.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{b.displayName="ProactiveContainer",b.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:b.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const ye=async e=>{const t=document.createElement("link"),n=new Promise((o,i)=>{t.onload=o,t.onerror=i});t.rel="stylesheet",t.href=e,document.head.appendChild(t),await n},Z=e=>{const[t,n]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(!(!e||t)){if(!e.stylesheet){n(!0);return}(async()=>(await ye(e.stylesheet).catch(o=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(o)}),n(!0)))()}},[e]),t},_e=380,ve=800,V=I(A.WIDGET),E=m(V("div","chat"),{width:_e,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ve,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),x=m(V("div","launcher"),{}),j={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},F={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},J=m(V("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${x},
    & > ${E}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${E}`]:{...j},[`& > ${x}`]:{...F}},false:{[`& > ${E}`]:{...F},[`& > ${x}`]:{...j}}},isHidden:{true:{display:"none"}}}}),Ee=({children:e,chatAPI:t,sendMessage:n,assistant:o})=>{var f;const[i,C]=a.exports.useState(!1),[_,u]=a.exports.useState(!1),[P,s]=a.exports.useState([]),T=a.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),w=Q(o);D(p.CLOSE,()=>C(!1)),D(p.OPEN,()=>C(!0));const O=v.useCallback(()=>n({type:p.OPEN}),[]),L=v.useCallback(()=>n({type:p.CLOSE}),[]);a.exports.useEffect(()=>{if(!!ae(t))return Object.assign(t,{open:O,close:L,hide:()=>u(!0),show:()=>u(!1),interact:d=>n({type:p.ACTION_REQUEST,payload:{action:d}}),proactive:{clear:()=>s([]),push:(...d)=>s(N=>[...N,...d])}}),()=>{Object.assign(t,{open:h,hide:h,show:h,close:h,interact:h,proactive:{clear:h,push:h}})}},[]);const $=(f=o==null?void 0:o.position)!=null?f:U.ChatPosition.RIGHT,l={bottom:o==null?void 0:o.spacing.bottom,[$]:o==null?void 0:o.spacing.side},c=Z(o);return y(J,{withChat:i,isHidden:_,className:w,children:[!!o&&c&&y(x,{style:l,children:[r(Se,{side:$,messages:P}),r(z,{onClick:O,image:o.launcher})]}),r(E,{style:T?{}:l,children:e})]})},xe=Object.assign(Ee,{Launcher:z,Container:J,ChatContainer:E,LauncherContainer:x});const ee=m("div",{height:"100%",[`& ${Y.Container}`]:{height:"100%"}}),Te=({assistant:e,versionID:t,verify:n,user:o,url:i,session:C,launch:_})=>{const u=a.exports.useCallback(()=>H({type:p.CLOSE}),[]),P=a.exports.useCallback(l=>H({type:p.SAVE_SESSION,payload:l}),[]),s=ie({versionID:t,verify:n,url:i,user:o,session:C,saveSession:P});D(p.OPEN,async()=>{s.isStatus(k.IDLE)&&await T()});const T=async()=>{await s.launch(_)},w=a.exports.useCallback(()=>{s.setStatus(k.ENDED),u()},[]),O=Q(e),L=a.exports.useCallback(l=>{const c=s.session.turns[l-1];return(c==null?void 0:c.type)===B.USER?c:null},[s.session.turns]);return Z(e)?r(ue,{...s,children:r(ee,{className:O,children:y(Y,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:s.session.startTime,hasEnded:s.isStatus(k.ENDED),isLoading:!s.session.turns.length,onStart:T,onEnd:w,onSend:s.reply,onMinimize:u,children:[s.session.turns.map((l,c)=>W(l).with({type:B.USER},({id:f,...d})=>a.exports.createElement(ce,{...K(d,["type"]),key:f})).with({type:B.SYSTEM},({id:f,...d})=>r(M,{...K(d,["type"]),feedback:e.feedback?{onClick:N=>{s.feedback(N,d.messages,L(c))}}:void 0,avatar:e.avatar,isLast:c===s.session.turns.length-1},f)).exhaustive()),s.indicator&&r(M.Indicator,{avatar:e.avatar})]})})}):null};Object.assign(Te,{Container:ee});const te="https://source.unsplash.com/featured/248x150",oe={title:"First Card",description:"Lorem ipsum dolor sit amet",image:te,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},ne=[oe,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:te},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],et={title:"Components/Carousel",component:q},se=e=>r(q,{...e}),Oe=se.bind({});Oe.args={cards:[oe]};const Re=se.bind({});Re.args={cards:ne};const be=e=>{const t=a.exports.useRef(null),n=a.exports.useRef(null);return r(xe.ChatContainer,{children:y(Y.Dialog,{children:[r(M.Controls,{ref:n}),y(M.Container,{ref:t,withImage:!0,scrollable:!0,children:[r(re,{avatar:le}),r(q,{...e,controlsRef:n,containerRef:t})]})]})})},Me=be.bind({});Me.args={cards:ne};export{Re as MultipleCards,Oe as SingleCard,Me as WithControls,et as default};
//# sourceMappingURL=Carousel.story.1e85f0a3.js.map
