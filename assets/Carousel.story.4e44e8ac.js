import{r as s,j as n,R,a as C}from"./jsx-runtime.45f0ba4d.js";import{A as ee}from"./index.07056fe2.js";import{K as N,C as O,U as te,o as $,S as _,a as b}from"./index.803eb5ae.js";import{V as oe}from"./fixtures.e9667a2d.js";import{b as se,t as v,C as x,s as c,a as ne,d as re}from"./animation.d2fdcf26.js";import{d as ae,e as Y,R as q,f as D,S as L,g as T}from"./index.a058fc86.js";import"./index.484a71f2.js";import{L as j}from"./index.23b7ba33.js";import{I as H}from"./index.86feeb11.js";import{n as m}from"./index.028710ee.js";import"./index.bf45fa85.js";import"./index.8241ff93.js";import"./index.1e35984a.js";import"./index.dbf571f3.js";import"./index.fcfea76e.js";import"./index.27ddb8ba.js";import"./index.d72e5d03.js";import"./index.a0aa8258.js";import"./index.a45f5118.js";import"./index.d38de89c.js";import"./index.184ce0b6.js";import"./iframe.a5f50841.js";import"./index.16037a8c.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.dbd95326.js";import"./variants.a98ba6a1.js";const ie=e=>{const[o,t]=s.exports.useState("");return s.exports.useEffect(()=>{e!=null&&e.color&&t(se({color:e.color}))},[e==null?void 0:e.color]),o};function ce(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}const le=v(x.PROACTIVE_CLOSE),u=c(le("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${H.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),K=({...e})=>n(u,{...e,children:n(H,{svg:"closeV2"})});try{u.displayName="CloseContainer",u.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:u.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const de=v(x.PROACTIVE_MESSAGE),h=c(de("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{h.displayName="MessageContainer",h.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:h.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const pe=v(x.PROACTIVE),S=c("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${h}`]:{...ne({duration:150,delay:0})}}),y=c(pe("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${u}`]:{opacity:0},["&:hover"]:{[`& ${u}`]:{opacity:1}}}),me=({side:e,messages:o})=>{const[t,a]=R.useState(!1),r=R.useMemo(()=>o.map((l,i)=>N(l).with({type:ae.TEXT},({payload:d})=>n(h,{children:String(d.message)},i)).otherwise(()=>null)),[o]);return R.useEffect(()=>{!r.length||a(!1)},[r]),t||!r.length?null:C(y,{style:{[e]:0,alignItems:e===Y.ChatPosition.LEFT?"start":"end"},children:[n(K,{onClick:()=>a(!0)}),n(S,{children:r})]})},ue=Object.assign(me,{Message:h,Close:K});try{S.displayName="ProactiveMessageContainer",S.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:S.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{y.displayName="ProactiveContainer",y.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:y.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const he=async e=>{const o=document.createElement("link"),t=new Promise((a,r)=>{o.onload=a,o.onerror=r});o.rel="stylesheet",o.href=e,re.appendChild(o),await t},Ce=e=>{const[o,t]=s.exports.useState(!1);return s.exports.useEffect(()=>{if(!e||o)return;if(!e.stylesheet){t(!0);return}const a=Array.isArray(e.stylesheet)?e.stylesheet[0]:e.stylesheet;(async()=>(await he(a).catch(r=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(r)}),t(!0)))()},[e]),o};const V=c("div",{height:"100%",[`& ${O.Container}`]:{height:"100%"}}),ge=()=>{const e=s.exports.useContext(q),o=s.exports.useContext(D),{assistant:t}=e,a=s.exports.useCallback(()=>{e.setStatus(L.ENDED),e.close()},[]),r=s.exports.useCallback(l=>{const i=o.session.turns[l-1];return(i==null?void 0:i.type)===T.USER?i:null},[o.session.turns]);return n(V,{children:C(O,{title:t.title,description:t.description,image:t.image,avatar:t.avatar,withWatermark:t.watermark,startTime:o.session.startTime,hasEnded:e.isStatus(L.ENDED),isLoading:!o.session.turns.length,onStart:e.launch,onEnd:a,onSend:e.reply,onMinimize:e.close,children:[o.session.turns.map((l,i)=>N(l).with({type:T.USER},({id:d,...p})=>s.exports.createElement(te,{...$(p,["type"]),key:d})).with({type:T.SYSTEM},({id:d,...p})=>n(_,{...$(p,["type"]),feedback:t.feedback?{onClick:E=>{e.feedback(E,p.messages,r(i))}}:void 0,avatar:t.avatar,isLast:i===o.session.turns.length-1},d)).exhaustive()),o.indicator&&n(_.Indicator,{avatar:t.avatar})]})})},fe=Object.assign(ge,{Container:V}),Se=380,ye=800,A=v(x.WIDGET),g=c(A("div","chat"),{width:Se,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ye,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),f=c(A("div","launcher"),{}),k={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},B={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},W=c(A("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${f},
    & > ${g}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${g}`]:{...k},[`& > ${f}`]:{...B}},false:{[`& > ${g}`]:{...B},[`& > ${f}`]:{...k}}},isHidden:{true:{display:"none"}}}}),_e=({chatAPI:e,ready:o})=>{var P;const{assistant:t,open:a,close:r,interact:l}=s.exports.useContext(q),{isOpen:i}=s.exports.useContext(D),[d,p]=s.exports.useState(!1),[E,M]=s.exports.useState([]),X=s.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),Z=ie(t);s.exports.useEffect(()=>{if(!!ce(e))return Object.assign(e,{open:a,close:r,hide:()=>p(!0),show:()=>p(!1),interact:l,proactive:{clear:()=>M([]),push:(...Q)=>M(J=>[...J,...Q])}}),o==null||o(),()=>{Object.assign(e,{open:m,hide:m,show:m,close:m,interact:m,proactive:{clear:m,push:m}})}},[]);const w=(P=t==null?void 0:t.position)!=null?P:Y.ChatPosition.RIGHT,I={bottom:t==null?void 0:t.spacing.bottom,[w]:t==null?void 0:t.spacing.side};return Ce(t)?C(W,{withChat:i,isHidden:d,className:Z,children:[!!t&&C(f,{style:I,children:[n(ue,{side:w,messages:E}),n(j,{onClick:a,image:t.launcher})]}),n(g,{style:X?{}:I,children:n(fe,{})})]}):null},ve=Object.assign(_e,{Launcher:j,Container:W,ChatContainer:g,LauncherContainer:f}),F="https://source.unsplash.com/featured/248x150",U={title:"First Card",description:"Lorem ipsum dolor sit amet",image:F,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},z=[U,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:F},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Je={title:"Components/Carousel",component:b},G=e=>n(b,{...e}),xe=G.bind({});xe.args={cards:[U]};const Ee=G.bind({});Ee.args={cards:z};const Re=e=>{const o=s.exports.useRef(null),t=s.exports.useRef(null);return n(ve.ChatContainer,{children:C(O.Dialog,{children:[n(_.Controls,{ref:t}),C(_.Container,{ref:o,withImage:!0,scrollable:!0,children:[n(ee,{avatar:oe}),n(b,{...e,controlsRef:t,containerRef:o})]})]})})},Te=Re.bind({});Te.args={cards:z};export{Ee as MultipleCards,xe as SingleCard,Te as WithControls,Je as default};
//# sourceMappingURL=Carousel.story.4e44e8ac.js.map
