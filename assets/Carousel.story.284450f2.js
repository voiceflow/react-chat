import{r as a,R as w}from"./index.25ad6385.js";import{A as Ce}from"./index.020d6ec1.js";import{K as ee,C as A,U as ye,o as k,S as b,a as te}from"./index.449daf09.js";import{V as ve,M as Se}from"./fixtures.79220d47.js";import"./index.1dd9de67.js";import{e as _e,f as be,c as $,d as se,S as I,g as M}from"./index.f900372a.js";import"./index.484a71f2.js";import{b as Ee,s as d,a as Re}from"./animation.fdae6ac9.js";import"./index.53a044d3.js";import"./index.5216862f.js";import"./index.5d897ad3.js";import{I as oe}from"./index.a988b399.js";import"./index.8dc73ce9.js";import"./index.568a1dd4.js";import{L as re}from"./index.b81f2a00.js";import{j as r}from"./jsx-runtime.264ec44b.js";import"./index.819c1879.js";import"./index.4d2fc52f.js";import{t as E,C as R}from"./tag.acfbb551.js";import"./index.85e49540.js";import"./index.0cf33758.js";import"./index.4197d55f.js";import"./index.6ea3386c.js";import"./functional.2e4761c3.js";import"./index.067252bc.js";import"./_createSet.6d7dfaaa.js";import"./_baseToString.b9e23acf.js";import"./is-plain-object.3669604d.js";import"./variants.1b0b2ced.js";import"./top-caret.6b52ad3c.js";function we(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}const q=e=>{const t=s=>()=>console.warn(e(s));return{open:t("open"),hide:t("hide"),show:t("show"),close:t("close"),interact:t("interact"),proactive:{clear:t("proactive.clear"),push:t("proactive.push")}}},ae=(e,t,s)=>a.exports.useEffect(()=>{if(!we(e))return;const o=q(i=>`Method '${i}' has no effect in this mode.`),n=t();return Object.assign(e,{...o,...n,proactive:{...o.proactive,...n.proactive}}),s==null||s(),()=>{const i=q(c=>`Method '${c}' has no effect after 'destroy' has been called. Call 'load' to render the chat and restore this method.`);Object.assign(e,i)}},[]),ne=e=>{const[t,s]=a.exports.useState("");return a.exports.useEffect(()=>{e!=null&&e.color&&s(Ee({color:e.color}))},[e==null?void 0:e.color]),t},Ie=async(e,t)=>{const s=document.createElement("link"),o=new Promise((n,i)=>{s.onload=n,s.onerror=i});s.rel="stylesheet",s.href=e,t.appendChild(s),await o},ie=(e,t)=>{const[s,o]=a.exports.useState(!1);return a.exports.useEffect(()=>{if(!e||s)return;if(!e.stylesheet){o(!0);return}const n=Array.isArray(e.stylesheet)?e.stylesheet[0]:e.stylesheet;(async()=>(await Ie(n,t!=null?t:document.head).catch(i=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(i)}),o(!0)))()},[e]),s};const Me=E(R.PROACTIVE_CLOSE),g=d(Me("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${oe.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),ce=({...e})=>r.exports.jsx(g,{...e,children:r.exports.jsx(oe,{svg:"closeV2"})});try{g.displayName="CloseContainer",g.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const je=E(R.PROACTIVE_MESSAGE),x=d(je("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{x.displayName="MessageContainer",x.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const Te=E(R.PROACTIVE),j=d("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${x}`]:{...Re({duration:150,delay:0})}}),T=d(Te("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${g}`]:{opacity:0},["&:hover"]:{[`& ${g}`]:{opacity:1}}}),Ae=({side:e,messages:t})=>{const[s,o]=w.useState(!1),n=w.useMemo(()=>t.map((i,c)=>ee(i).with({type:_e.TEXT},({payload:l})=>r.exports.jsx(x,{children:String(l.message)},c)).otherwise(()=>null)),[t]);return w.useEffect(()=>{!n.length||o(!1)},[n]),s||!n.length?null:r.exports.jsxs(T,{style:{[e]:0,alignItems:e===be.ChatPosition.LEFT?"start":"end"},children:[r.exports.jsx(ce,{onClick:()=>o(!0)}),r.exports.jsx(j,{children:n})]})},$e=Object.assign(Ae,{Message:x,Close:ce});try{j.displayName="ProactiveMessageContainer",j.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}try{T.displayName="ProactiveContainer",T.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}}}catch{}const le=d("div",{height:"100%",[`& ${A.Container}`]:{height:"100%"}}),Le=({className:e})=>{const t=a.exports.useContext($),s=a.exports.useContext(se),{assistant:o,config:n}=t,i=a.exports.useCallback(()=>{t.setStatus(I.ENDED),t.close()},[]),c=a.exports.useCallback(l=>{const p=s.session.turns[l-1];return(p==null?void 0:p.type)===M.USER?p:null},[s.session.turns]);return r.exports.jsx(le,{className:e,children:r.exports.jsxs(A,{title:o.title,description:o.description,image:o.image,avatar:o.avatar,withWatermark:o.watermark,startTime:s.session.startTime,hasEnded:t.isStatus(I.ENDED),isLoading:t.isStatus(I.IDLE)&&s.session.turns.length===0&&n.autostart,onStart:t.launch,onEnd:i,onSend:t.reply,onMinimize:t.close,children:[s.session.turns.map((l,p)=>ee(l).with({type:M.USER},({id:u,...m})=>a.exports.createElement(ye,{...k(m,["type"]),key:u})).with({type:M.SYSTEM},({id:u,...m})=>r.exports.jsx(b,{...k(m,["type"]),feedback:o.feedback?{onClick:C=>{t.feedback(C,m.messages,c(p))}}:void 0,avatar:o.avatar,isLast:p===s.session.turns.length-1},u)).exhaustive()),s.indicator&&r.exports.jsx(b.Indicator,{avatar:o.avatar})]})})},pe=Object.assign(Le,{Container:le}),O=({shadowRoot:e,chatAPI:t,ready:s})=>{const{assistant:o,interact:n,open:i}=a.exports.useContext($),c=ne(o),l=ie(o,e);return ae(t,()=>(console.info("Methods open, close, hide, show, proactive.clear, proactive.push have no effect in this mode."),{interact:n}),s),a.exports.useEffect(()=>{i()},[]),l?r.exports.jsx(pe,{className:c}):null};try{O.displayName="ChatEmbed",O.__docgenInfo={description:"",displayName:"ChatEmbed",props:{shadowRoot:{defaultValue:null,description:"",name:"shadowRoot",required:!0,type:{name:"ShadowRoot"}},chatAPI:{defaultValue:null,description:"",name:"chatAPI",required:!0,type:{name:"any"}},ready:{defaultValue:null,description:"",name:"ready",required:!1,type:{name:"() => void"}}}}}catch{}const Pe=380,De=800,L=E(R.WIDGET),h=d(L("div","chat"),{width:Pe,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:De,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),f=d(L("div","launcher"),{}),V={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},W={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},de=d(L("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${f},
    & > ${h}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${h}`]:{...V},[`& > ${f}`]:{...W}},false:{[`& > ${h}`]:{...W},[`& > ${f}`]:{...V}}},isHidden:{true:{display:"none"}}}}),Ne=({shadowRoot:e,chatAPI:t,ready:s})=>{const{assistant:o,open:n,close:i,interact:c}=a.exports.useContext($),{isOpen:l}=a.exports.useContext(se),[p,u]=a.exports.useState(!1),[m,C]=a.exports.useState([]),he=a.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),fe=ne(o);ae(t,()=>({open:n,close:i,hide:()=>u(!0),show:()=>u(!1),interact:c,proactive:{clear:()=>C([]),push:(...ge)=>C(xe=>[...xe,...ge])}}),s);const D=o.position,N={bottom:o.spacing.bottom,[D]:o.spacing.side};return ie(o,e)?r.exports.jsxs(de,{withChat:l,isHidden:p,className:fe,children:[r.exports.jsxs(f,{style:N,children:[r.exports.jsx($e,{side:D,messages:m}),r.exports.jsx(re,{onClick:n,image:o.launcher})]}),r.exports.jsx(h,{style:he?{}:N,children:r.exports.jsx(pe,{})})]}):null},ke=Object.assign(Ne,{Launcher:re,Container:de,ChatContainer:h,LauncherContainer:f}),ft={component:te,title:"Components/Carousel"},ue=Se,me={title:"First Card",description:"Lorem ipsum dolor sit amet",image:ue,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},P=[me,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:ue},{title:"Third Card with a long title that wraps",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button with a long label that wraps"},{request:{},name:"Fifth Button"}]}],y={args:{cards:[me]}},v={args:{cards:P}},S={args:{cards:P},render:e=>{const t=a.exports.useRef(null),s=a.exports.useRef(null);return r.exports.jsx(ke.ChatContainer,{children:r.exports.jsxs(A.Dialog,{children:[r.exports.jsx(b.Controls,{ref:s}),r.exports.jsxs(b.Container,{ref:t,withImage:!0,scrollable:!0,children:[r.exports.jsx(Ce,{avatar:ve}),r.exports.jsx(te,{...e,controlsRef:s,containerRef:t})]})]})})}},_={args:{cards:P}};var H,F,U;y.parameters={...y.parameters,docs:{...(H=y.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    cards: [FIRST_CARD]
  }
}`,...(U=(F=y.parameters)==null?void 0:F.docs)==null?void 0:U.source}}};var z,B,G;v.parameters={...v.parameters,docs:{...(z=v.parameters)==null?void 0:z.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  }
}`,...(G=(B=v.parameters)==null?void 0:B.docs)==null?void 0:G.source}}};var Y,K,X;S.parameters={...S.parameters,docs:{...(Y=S.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  },
  render: args => {
    const containerRef = useRef<HTMLDivElement>(null);
    const controlsRef = useRef<HTMLDivElement>(null);
    return <ChatWidget.ChatContainer>
        <Chat.Dialog>
          <SystemResponse.Controls ref={controlsRef} />
          <SystemResponse.Container ref={containerRef} withImage scrollable>
            <Avatar avatar={VF_ICON} />
            <Carousel {...args} controlsRef={controlsRef} containerRef={containerRef} />
          </SystemResponse.Container>
        </Chat.Dialog>
      </ChatWidget.ChatContainer>;
  }
}`,...(X=(K=S.parameters)==null?void 0:K.docs)==null?void 0:X.source}}};var Z,Q,J;_.parameters={..._.parameters,docs:{...(Z=_.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: {
    cards: MULTIPLE_CARDS
  }
}`,...(J=(Q=_.parameters)==null?void 0:Q.docs)==null?void 0:J.source}}};export{S as ControlsTemplate,v as MultipleCards,y as SingleCard,_ as WithControls,ft as default};
