import{r as s,j as n,R as T,a as h}from"./jsx-runtime.0d40b6e8.js";import{A as ee}from"./index.8b2b305b.js";import{K as N,C as b,U as te,o as $,S as v,a as M}from"./index.1a28c4cd.js";import{V as oe}from"./fixtures.e9667a2d.js";import{b as se,t as x,C as E,s as c,a as ne,d as re}from"./animation.4c8ab83a.js";import{c as Y,R as q,d as D,S as L,T as O}from"./index.4e5e98b2.js";import"./index.484a71f2.js";import{L as j}from"./index.37d9333b.js";import{T as ae}from"./guards.7dc552a9.js";import{I as H}from"./index.e4a72e1a.js";import{n as p}from"./index.dde809c8.js";import"./index.507adc06.js";import"./index.3133f847.js";import"./index.b2b2e8a8.js";import"./index.485b6ed4.js";import"./index.22a36179.js";import"./index.85751129.js";import"./index.697d86f2.js";import"./index.275d7614.js";import"./index.05e1ac2c.js";import"./index.af22d987.js";import"./iframe.8fb191d0.js";import"./index.2c3f1706.js";import"./is-plain-object.ed97bcae.js";import"./top-caret.630acf52.js";import"./variants.043b1609.js";const K=e=>{const[t,o]=s.exports.useState("");return s.exports.useEffect(()=>{e!=null&&e.color&&o(se({color:e.color}))},[e==null?void 0:e.color]),t};function ie(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}const ce=x(E.PROACTIVE_CLOSE),m=c(ce("div"),{width:32,height:32,borderRadius:"$round",display:"flex",justifyContent:"center",alignItems:"center",color:"#656D75",cursor:"pointer",background:"$white",boxShadow:"$surfaceZ1Light",[`& ${H.Frame}`]:{width:10,height:10},["&:hover, &:active"]:{color:"#2B3239"}}),V=({...e})=>n(m,{...e,children:n(H,{svg:"closeV2"})});try{m.displayName="CloseContainer",m.__docgenInfo={description:"",displayName:"CloseContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Close.tsx#CloseContainer"]={docgenInfo:m.__docgenInfo,name:"CloseContainer",path:"src/components/Proactive/Close.tsx#CloseContainer"})}catch{}const le=x(E.PROACTIVE_MESSAGE),u=c(le("div"),{padding:"11px 16px 10px 16px",maxWidth:256,color:"#1A1E23",boxShadow:"$surfaceZ1Light",borderRadius:"$2",background:"$white",typo:{size:14}});try{u.displayName="MessageContainer",u.__docgenInfo={description:"",displayName:"MessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#MessageContainer"]={docgenInfo:u.__docgenInfo,name:"MessageContainer",path:"src/components/Proactive/Message.tsx#MessageContainer"})}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/Message.tsx#Message"]={docgenInfo:Message.__docgenInfo,name:"Message",path:"src/components/Proactive/Message.tsx#Message"})}catch{}const de=x(E.PROACTIVE),y=c("div",{display:"flex",flexDirection:"column",gap:8,margin:"$4 0",alignItems:"inherit",[`& ${u}`]:{...ne({duration:150,delay:0})}}),_=c(de("div"),{position:"absolute",bottom:"100%",width:256,display:"flex",flexDirection:"column",[`& ${m}`]:{opacity:0},["&:hover"]:{[`& ${m}`]:{opacity:1}}}),pe=({side:e,messages:t})=>{const[o,a]=T.useState(!1),i=T.useMemo(()=>t.map((C,l)=>N(C).with({type:ae.TEXT},({payload:r})=>n(u,{children:String(r.message)},l)).otherwise(()=>null)),[t]);return T.useEffect(()=>{!i.length||a(!1)},[i]),o||!i.length?null:h(_,{style:{[e]:0,alignItems:e===Y.ChatPosition.LEFT?"start":"end"},children:[n(V,{onClick:()=>a(!0)}),n(y,{children:i})]})},me=Object.assign(pe,{Message:u,Close:V});try{y.displayName="ProactiveMessageContainer",y.__docgenInfo={description:"",displayName:"ProactiveMessageContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveMessageContainer"]={docgenInfo:y.__docgenInfo,name:"ProactiveMessageContainer",path:"src/components/Proactive/index.tsx#ProactiveMessageContainer"})}catch{}try{_.displayName="ProactiveContainer",_.__docgenInfo={description:"",displayName:"ProactiveContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Proactive/index.tsx#ProactiveContainer"]={docgenInfo:_.__docgenInfo,name:"ProactiveContainer",path:"src/components/Proactive/index.tsx#ProactiveContainer"})}catch{}const ue=async e=>{const t=document.createElement("link"),o=new Promise((a,i)=>{t.onload=a,t.onerror=i});t.rel="stylesheet",t.href=e,re.appendChild(t),await o},he=e=>{const[t,o]=s.exports.useState(!1);return s.exports.useEffect(()=>{if(!(!e||t)){if(!e.stylesheet){o(!0);return}(async()=>(await ue(e.stylesheet).catch(a=>{console.error(`failed to load stylesheet: ${e.stylesheet}`),console.error(a)}),o(!0)))()}},[e]),t};const W=c("div",{height:"100%",[`& ${b.Container}`]:{height:"100%"}}),Ce=()=>{const e=s.exports.useContext(q),t=s.exports.useContext(D),{assistant:o}=e,a=s.exports.useCallback(()=>{e.setStatus(L.ENDED),e.close()},[]),i=K(o),C=s.exports.useCallback(l=>{const r=t.session.turns[l-1];return(r==null?void 0:r.type)===O.USER?r:null},[t.session.turns]);return n(W,{className:i,children:h(b,{title:o.title,description:o.description,image:o.image,avatar:o.avatar,withWatermark:o.watermark,startTime:t.session.startTime,hasEnded:e.isStatus(L.ENDED),isLoading:!t.session.turns.length,onStart:e.launch,onEnd:a,onSend:e.reply,onMinimize:e.close,children:[t.session.turns.map((l,r)=>N(l).with({type:O.USER},({id:g,...d})=>s.exports.createElement(te,{...$(d,["type"]),key:g})).with({type:O.SYSTEM},({id:g,...d})=>n(v,{...$(d,["type"]),feedback:o.feedback?{onClick:R=>{e.feedback(R,d.messages,C(r))}}:void 0,avatar:o.avatar,isLast:r===t.session.turns.length-1},g)).exhaustive()),t.indicator&&n(v.Indicator,{avatar:o.avatar})]})})},ge=Object.assign(Ce,{Container:W}),fe=380,Se=800,A=x(E.WIDGET),f=c(A("div","chat"),{width:fe,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:Se,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),S=c(A("div","launcher"),{}),k={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},B={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},F=c(A("div"),{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${S},
    & > ${f}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${f}`]:{...k},[`& > ${S}`]:{...B}},false:{[`& > ${f}`]:{...B},[`& > ${S}`]:{...k}}},isHidden:{true:{display:"none"}}}}),ye=({chatAPI:e})=>{var P;const{assistant:t,open:o,close:a,interact:i}=s.exports.useContext(q),{isOpen:C}=s.exports.useContext(D),[l,r]=s.exports.useState(!1),[g,d]=s.exports.useState([]),R=s.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),Z=K(t);s.exports.useEffect(()=>{if(!!ie(e))return Object.assign(e,{open:o,close:a,hide:()=>r(!0),show:()=>r(!1),interact:i,proactive:{clear:()=>d([]),push:(...Q)=>d(J=>[...J,...Q])}}),()=>{Object.assign(e,{open:p,hide:p,show:p,close:p,interact:p,proactive:{clear:p,push:p}})}},[]);const w=(P=t==null?void 0:t.position)!=null?P:Y.ChatPosition.RIGHT,I={bottom:t==null?void 0:t.spacing.bottom,[w]:t==null?void 0:t.spacing.side};return he(t)?h(F,{withChat:C,isHidden:l,className:Z,children:[!!t&&h(S,{style:I,children:[n(me,{side:w,messages:g}),n(j,{onClick:o,image:t.launcher})]}),n(f,{style:R?{}:I,children:n(ge,{})})]}):null},_e=Object.assign(ye,{Launcher:j,Container:F,ChatContainer:f,LauncherContainer:S}),U="https://source.unsplash.com/featured/248x150",z={title:"First Card",description:"Lorem ipsum dolor sit amet",image:U,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},G=[z,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:U},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Qe={title:"Components/Carousel",component:M},X=e=>n(M,{...e}),ve=X.bind({});ve.args={cards:[z]};const xe=X.bind({});xe.args={cards:G};const Ee=e=>{const t=s.exports.useRef(null),o=s.exports.useRef(null);return n(_e.ChatContainer,{children:h(b.Dialog,{children:[n(v.Controls,{ref:o}),h(v.Container,{ref:t,withImage:!0,scrollable:!0,children:[n(ee,{avatar:oe}),n(M,{...e,controlsRef:o,containerRef:t})]})]})})},Re=Ee.bind({});Re.args={cards:G};export{xe as MultipleCards,ve as SingleCard,Re as WithControls,Qe as default};
//# sourceMappingURL=Carousel.story.60b6fd0b.js.map
