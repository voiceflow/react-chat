{"version":3,"file":"index.c7df0e7e.js","sources":["../../src/components/Carousel/styled.ts","../../src/components/Carousel/constants.ts","../../src/components/Carousel/hooks.ts","../../src/components/Carousel/index.tsx"],"sourcesContent":["import Bubble from '@/components/Bubble';\nimport Card from '@/components/Card';\nimport Icon from '@/components/Icon';\nimport { styled } from '@/styles';\n\nconst BUTTON_SIZE = 42;\nexport const CAROUSEL_GUTTER_WIDTH = 12;\n\nexport const ButtonContainer = styled('span', {\n  position: 'absolute',\n  zIndex: 1,\n  trans: ['opacity'],\n\n  [`& ${Bubble.Container}`]: {\n    height: BUTTON_SIZE,\n    width: BUTTON_SIZE,\n    backgroundColor: '$white',\n    boxShadow: '0 5px 8px -8px $shadow12, 0 2px 4px -3px $shadow12, 0 0 0 1px $shadow3, 0 1px 3px 1px $shadow1',\n\n    [`& ${Icon.Frame}`]: {\n      height: '$xxs',\n      width: '$xxs',\n      color: 'rgba(0,0,0,0.6)',\n    },\n  },\n\n  variants: {\n    visible: {\n      true: {\n        opacity: 1,\n        pointerEvents: 'auto',\n      },\n      false: {\n        opacity: 0,\n        pointerEvents: 'none',\n      },\n    },\n    alignment: {\n      left: {\n        left: 48 - BUTTON_SIZE / 2,\n      },\n      right: {\n        right: 70 - BUTTON_SIZE / 2,\n\n        [`& ${Bubble.Container} ${Icon.Frame}`]: {\n          transform: 'scaleX(-1)',\n        },\n      },\n    },\n  },\n});\n\nexport const Container = styled('div', {\n  display: 'flex',\n  whiteSpace: 'nowrap',\n\n  [`& ${Card.Container}`]: {\n    height: 'fit-content',\n    flexShrink: 0,\n    marginLeft: CAROUSEL_GUTTER_WIDTH,\n\n    '&:first-of-type': {\n      marginLeft: 0,\n    },\n  },\n});\n","import { CARD_WIDTH } from '@/components/Card/styled';\n\nimport { CAROUSEL_GUTTER_WIDTH } from './styled';\n\nexport const CARD_WITH_BORDER_WIDTH = CARD_WIDTH + 2;\nexport const PREVIOUS_CONTROL_BOUNDARY = CARD_WITH_BORDER_WIDTH / 3;\nexport const NEXT_CONTROL_BOUNDARY = CARD_WITH_BORDER_WIDTH + CAROUSEL_GUTTER_WIDTH + PREVIOUS_CONTROL_BOUNDARY;\nexport const CARD_WITH_GUTTER_WIDTH = CARD_WITH_BORDER_WIDTH + CAROUSEL_GUTTER_WIDTH;\n","import { RefObject, useEffect, useRef, useState } from 'react';\n\nimport { CardProps } from '../Card';\nimport { CARD_WITH_GUTTER_WIDTH, NEXT_CONTROL_BOUNDARY, PREVIOUS_CONTROL_BOUNDARY } from './constants';\nimport { CAROUSEL_GUTTER_WIDTH } from './styled';\n\nexport const useScrollTo =\n  <T extends HTMLElement>(ref: RefObject<T> | undefined, getNextIndex: (el: T) => number) =>\n  () => {\n    const el = ref?.current;\n    if (!el) return;\n\n    const index = getNextIndex(el);\n\n    el.scrollTo({\n      left: index && index * CARD_WITH_GUTTER_WIDTH,\n      behavior: 'smooth',\n    });\n  };\n\nexport const useScrollObserver = (\n  containerRef: RefObject<HTMLDivElement> | undefined,\n  controlsRef: RefObject<HTMLSpanElement> | undefined,\n  cards: CardProps[]\n) => {\n  const [showPreviousButton, setShowPreviousButton] = useState(false);\n  const [showNextButton, setShowNextButton] = useState(false);\n  const previousButtonRef = useRef<HTMLButtonElement>(null);\n  const nextButtonRef = useRef<HTMLButtonElement>(null);\n  const hasMultipleCards = cards.length > 1;\n\n  useEffect(() => {\n    if (!controlsRef?.current || !hasMultipleCards) return;\n\n    setShowNextButton(true);\n  }, []);\n\n  useEffect(() => {\n    const containerEl = containerRef?.current;\n    if (!containerEl || !hasMultipleCards) return undefined;\n\n    const trackWidth = CARD_WITH_GUTTER_WIDTH * cards.length - CAROUSEL_GUTTER_WIDTH;\n\n    const handleScroll = (): void => {\n      const { scrollLeft } = containerEl;\n\n      setShowPreviousButton(scrollLeft >= PREVIOUS_CONTROL_BOUNDARY);\n      setShowNextButton(scrollLeft <= trackWidth - NEXT_CONTROL_BOUNDARY);\n    };\n\n    containerEl.addEventListener('scroll', handleScroll);\n\n    return () => {\n      containerEl.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  return {\n    previousButtonRef,\n    nextButtonRef,\n    showPreviousButton,\n    showNextButton,\n  };\n};\n","import { RefObject } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport Bubble from '@/components/Bubble';\nimport Card, { CardProps } from '@/components/Card';\n\nimport { CARD_WITH_GUTTER_WIDTH } from './constants';\nimport { useScrollObserver, useScrollTo } from './hooks';\nimport { ButtonContainer, Container } from './styled';\n\nexport interface CarouselProps {\n  cards: CardProps[];\n  containerRef?: RefObject<HTMLDivElement>;\n  controlsRef?: RefObject<HTMLSpanElement>;\n}\n\nconst Carousel: React.FC<CarouselProps> = ({ cards, containerRef, controlsRef }) => {\n  const { previousButtonRef, nextButtonRef, showPreviousButton, showNextButton } = useScrollObserver(containerRef, controlsRef, cards);\n  const containerEl = containerRef?.current;\n  const controlsEl = controlsRef?.current;\n  const showControls = containerEl && controlsEl;\n\n  const scrollToPrevious = useScrollTo(containerRef, (el) => Math.ceil(el.scrollLeft / CARD_WITH_GUTTER_WIDTH) - 1);\n  const scrollToNext = useScrollTo(containerRef, (el) => Math.floor(el.scrollLeft / CARD_WITH_GUTTER_WIDTH) + 1);\n\n  return (\n    <>\n      <Container>\n        {cards.map((card, index) => (\n          <Card {...card} key={index} />\n        ))}\n      </Container>\n      {showControls &&\n        createPortal(\n          <>\n            <ButtonContainer\n              ref={previousButtonRef}\n              alignment=\"left\"\n              visible={showPreviousButton}\n              css={{\n                transform: `translateY(calc(${containerEl.clientHeight / 2}px - 50%))`,\n              }}\n            >\n              <Bubble svg=\"largeArrowLeft\" onClick={scrollToPrevious} />\n            </ButtonContainer>\n            <ButtonContainer\n              ref={nextButtonRef}\n              alignment=\"right\"\n              visible={showNextButton}\n              css={{\n                transform: `translateY(calc(${containerEl.clientHeight / 2}px - 50%))`,\n              }}\n            >\n              <Bubble svg=\"largeArrowLeft\" onClick={scrollToNext} />\n            </ButtonContainer>\n          </>,\n          controlsEl\n        )}\n    </>\n  );\n};\n\nexport default Object.assign(Carousel, {\n  Container,\n  ButtonContainer,\n});\n"],"names":["BUTTON_SIZE","CAROUSEL_GUTTER_WIDTH","ButtonContainer","styled","Bubble","Icon","Container","Card","CARD_WITH_BORDER_WIDTH","CARD_WIDTH","PREVIOUS_CONTROL_BOUNDARY","NEXT_CONTROL_BOUNDARY","CARD_WITH_GUTTER_WIDTH","useScrollTo","ref","getNextIndex","el","index","useScrollObserver","containerRef","controlsRef","cards","showPreviousButton","setShowPreviousButton","useState","showNextButton","setShowNextButton","previousButtonRef","useRef","nextButtonRef","hasMultipleCards","useEffect","containerEl","trackWidth","handleScroll","scrollLeft","Carousel","controlsEl","showControls","scrollToPrevious","scrollToNext","_jsxs","_Fragment","_jsx","card","_createElement","createPortal","Carousel$1"],"mappings":"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"}