import{r,R as A,a as S,j as n}from"./jsx-runtime.c5920df8.js";import{A as z}from"./index.f1fc3219.js";import{u as x,T as m,i as B,c as G,C as I,a as V,S as R,b as O,K as Y,U as J,o as M,d as y,e as L}from"./index.05bcc33e.js";import{V as K}from"./fixtures.e9667a2d.js";import{b as X,s as E}from"./theme.fe25042e.js";import"./index.0d16dd00.js";import{L as D}from"./index.3a637981.js";import"./index.985e06b7.js";import"./index.0d1a0e56.js";import{c as Q}from"./index.9cd7056c.js";import"./index.dc1c3743.js";import"./index.378eecf3.js";import"./index.5264d8fa.js";import"./index.e948a081.js";import"./index.8ac7ed61.js";import"./index.b1be96d7.js";import"./index.648e4319.js";import"./index.893a1850.js";import"./iframe.b8c96e01.js";import"./is-plain-object.ed97bcae.js";import"./index.b03999ec.js";import"./variants.e0e18212.js";import"./top-caret.ed732828.js";const _=e=>{const[i,s]=r.exports.useState("");return r.exports.useEffect(()=>{e!=null&&e.color&&s(X({color:e.color}))},[e==null?void 0:e.color]),i},Z=380,ee=800,p=E("div",{width:Z,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ee,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),d=E("div",{}),N={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},H={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},$=E("div",{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${d},
    & > ${p}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${p}`]:{...N},[`& > ${d}`]:{...H}},false:{[`& > ${p}`]:{...H},[`& > ${d}`]:{...N}}},isHidden:{true:{display:"none"}}}}),te=({children:e,chatAPI:i,sendMessage:s,assistant:o})=>{var c;const[w,u]=r.exports.useState(!1),[h,C]=r.exports.useState(!1),t=r.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),f=_(o);x(m.CLOSE,()=>u(!1)),x(m.OPEN,()=>u(!0));const g=A.useCallback(()=>s({type:m.OPEN}),[]),T=A.useCallback(()=>s({type:m.CLOSE}),[]);r.exports.useEffect(()=>{!B(i)||Object.assign(i,{open:g,close:T,hide:()=>C(!0),show:()=>C(!1),interact:l=>s({type:m.INTERACT,payload:l})})},[]);const v=(c=o==null?void 0:o.position)!=null?c:G.ChatPosition.RIGHT,a={bottom:o==null?void 0:o.spacing.bottom,[v]:o==null?void 0:o.spacing.side};return S($,{withChat:w,isHidden:h,className:f,children:[!!o&&n(d,{style:a,children:n(D,{onClick:g,image:o.launcher})}),n(p,{style:t?{}:a,children:e})]})},oe=Object.assign(te,{Launcher:D,Container:$,ChatContainer:p,LauncherContainer:d}),j=E("div",{height:"100%",[`& ${I.Container}`]:{height:"100%"}}),k=e=>{const i=JSON.stringify(e);window.postMessage(i),window.parent.postMessage(i,"*")},re=({assistant:e,versionID:i,verify:s,user:o,url:w,session:u})=>{const h=r.exports.useCallback(()=>k({type:m.CLOSE}),[]),C=r.exports.useCallback(a=>k({type:m.SAVE_SESSION,payload:a}),[]),t=V({versionID:i,verify:s,url:w,user:o,session:u,saveSession:C},[s.projectID]);x(m.INTERACT,({payload:a})=>t.interact(a)),x(m.OPEN,async()=>{t.isStatus(R.IDLE)&&await f()});const f=async()=>{await t.launch()},g=r.exports.useCallback(()=>{t.setStatus(R.ENDED),h()},[]),T=_(e),v=r.exports.useCallback(a=>{const c=t.session.turns[a-1];return(c==null?void 0:c.type)===O.USER?c:null},[t.session.turns]);return n(Q,{...t,children:n(j,{className:T,children:S(I,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:t.session.startTime,hasEnded:t.isStatus(R.ENDED),isLoading:!t.session.turns.length,onStart:f,onEnd:g,onSend:t.reply,onMinimize:h,children:[t.session.turns.map((a,c)=>Y(a).with({type:O.USER},({id:l,...b})=>r.exports.createElement(J,{...M(b,["type"]),key:l})).with({type:O.SYSTEM},({id:l,...b})=>n(y,{...M(b,["type"]),feedback:e.feedback?{onClick:U=>{t.feedback(U,b.messages,v(c))}}:void 0,avatar:e.avatar,isLast:c===t.session.turns.length-1},l)).exhaustive()),t.indicator&&n(y.Indicator,{avatar:e.avatar})]})})})};Object.assign(re,{sendMessage:k,Container:j});const P="https://source.unsplash.com/featured/248x150",W={title:"First Card",description:"Lorem ipsum dolor sit amet",image:P,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},q=[W,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:P},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Ae={title:"Components/Carousel",component:L},F=e=>n(L,{...e}),ie=F.bind({});ie.args={cards:[W]};const ne=F.bind({});ne.args={cards:q};const se=e=>{const i=r.exports.useRef(null),s=r.exports.useRef(null);return n(oe.ChatContainer,{children:S(I.Dialog,{children:[n(y.Controls,{ref:s}),S(y.Container,{ref:i,withImage:!0,scrollable:!0,children:[n(z,{avatar:K}),n(L,{...e,controlsRef:s,containerRef:i})]})]})})},ae=se.bind({});ae.args={cards:q};export{ne as MultipleCards,ie as SingleCard,ae as WithControls,Ae as default};
//# sourceMappingURL=Carousel.story.7e32a229.js.map
