{"version":3,"file":"Carousel.story.a5f1c5f1.js","sources":["../../src/common/hooks.ts","../../src/utils/stylesheet.ts","../../src/views/ChatWidget/styled.ts","../../src/views/ChatWidget/index.tsx","../../src/views/ChatWindow/styled.ts","../../src/views/ChatWindow/utils.ts","../../src/views/ChatWindow/index.tsx","../../src/components/Carousel/Carousel.story.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { createCustomTheme } from '@/styles';\n\nimport { Assistant } from './types';\n\nexport const useTheme = (assistant?: Assistant) => {\n  const [theme, setTheme] = useState('');\n  useEffect(() => {\n    if (assistant?.color) {\n      setTheme(createCustomTheme({ color: assistant.color }));\n    }\n  }, [assistant?.color]);\n\n  return theme;\n};\n","/* eslint-disable no-console */\nimport { useEffect, useState } from 'react';\n\nimport { Assistant } from '@/common';\n\n// used to add stylesheets dynamically, resolves when loaded\nexport const addStyleSheetURL = async (url: string) => {\n  const link = document.createElement('link');\n  const load = new Promise((resolve, reject) => {\n    link.onload = resolve;\n    link.onerror = reject;\n  });\n\n  link.rel = 'stylesheet';\n  link.href = url;\n  document.head.appendChild(link);\n\n  await load;\n};\n\n// do not load until stylesheet is resolved\nexport const useResolveAssistantStyleSheet = (assistant?: Assistant): boolean => {\n  const [isStyleSheetResolved, setStyleSheetResolved] = useState(false);\n\n  useEffect(() => {\n    if (!assistant || isStyleSheetResolved) return;\n\n    if (!assistant.stylesheet) {\n      setStyleSheetResolved(true);\n      return;\n    }\n\n    // inject stylesheet url\n    (async () => {\n      await addStyleSheetURL(assistant.stylesheet!).catch((error) => {\n        console.error(`failed to load stylesheet: ${assistant.stylesheet}`);\n        console.error(error);\n      });\n      setStyleSheetResolved(true);\n    })();\n  }, [assistant]);\n\n  return isStyleSheetResolved;\n};\n","import { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { CSS, styled } from '@/styles';\n\nconst CHAT_WIDTH = 380;\nconst MAX_CHAT_HEIGHT = 800;\n\nconst tag = tagFactory(ClassName.WIDGET);\n\nexport const ChatContainer = styled(tag('div', 'chat'), {\n  width: CHAT_WIDTH,\n  overflow: 'hidden',\n  borderRadius: '$2',\n  boxShadow: '0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4',\n\n  height: '90%',\n  maxHeight: MAX_CHAT_HEIGHT,\n\n  '@mobile': {\n    position: 'fixed',\n    height: 'unset',\n    maxHeight: 'unset',\n    width: 'unset',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    borderRadius: 0,\n    boxShadow: 'none',\n  },\n});\n\nexport const LauncherContainer = styled(tag('div', 'launcher'), {});\n\nconst animateInStyles: CSS = {\n  opacity: 1,\n  pointerEvents: 'auto',\n  transform: 'translateY(0%)',\n  transition: 'transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear',\n};\n\nconst animateOutStyles: CSS = {\n  opacity: 0,\n  pointerEvents: 'none',\n  transform: 'translateY(100%)',\n  transition: 'transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear',\n};\n\nexport const Container = styled(tag('div'), {\n  position: 'fixed',\n  inset: 0,\n  '-webkit-font-smoothing': 'antialiased',\n  '-moz-osx-font-smoothing': 'grayscale',\n  pointerEvents: 'none',\n  zIndex: 10000,\n\n  [`\n    & > ${LauncherContainer},\n    & > ${ChatContainer}\n  `]: {\n    position: 'absolute',\n  },\n\n  variants: {\n    withChat: {\n      true: {\n        [`& > ${ChatContainer}`]: {\n          ...animateInStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateOutStyles,\n        },\n      },\n      false: {\n        [`& > ${ChatContainer}`]: {\n          ...animateOutStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateInStyles,\n        },\n      },\n    },\n    isHidden: {\n      true: {\n        display: 'none',\n      },\n    },\n  },\n});\n","import type { RuntimeAction } from '@voiceflow/sdk-runtime';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { Assistant, ChatPosition, isObject, Listeners, PostMessage, useTheme } from '@/common';\nimport Launcher from '@/components/Launcher';\nimport { noop } from '@/utils/functional';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\n\nimport { ChatContainer, Container, LauncherContainer } from './styled';\nimport { ChatAPI } from './types';\n\ninterface ChatWidgetProps extends React.PropsWithChildren {\n  assistant?: Assistant | undefined;\n  widgetURL?: string;\n  chatAPI?: ChatAPI | undefined;\n  sendMessage: (message: PostMessage.AnyMessage) => void;\n}\n\nconst ChatWidget: React.FC<ChatWidgetProps> = ({ children, chatAPI, sendMessage, assistant }) => {\n  /** initialization */\n  const [isOpen, setOpen] = useState(false);\n  const [isHidden, setHidden] = useState(false);\n  const isMobile = useMemo(() => window.matchMedia('(max-width: 768px)').matches, []);\n\n  const theme = useTheme(assistant);\n\n  /** listeners */\n  Listeners.useListenMessage(PostMessage.Type.CLOSE, () => setOpen(false));\n  Listeners.useListenMessage(PostMessage.Type.OPEN, () => setOpen(true));\n\n  const open = React.useCallback(() => sendMessage({ type: PostMessage.Type.OPEN }), []);\n  const close = React.useCallback(() => sendMessage({ type: PostMessage.Type.CLOSE }), []);\n\n  /** initialize window */\n  useEffect(() => {\n    if (!isObject(chatAPI)) return undefined;\n\n    Object.assign(chatAPI, {\n      open,\n      close,\n      hide: () => setHidden(true),\n      show: () => setHidden(false),\n      interact: (action: RuntimeAction) => sendMessage({ type: PostMessage.Type.INTERACT, payload: action }),\n    });\n\n    return () => {\n      Object.assign(chatAPI, {\n        open: noop,\n        hide: noop,\n        show: noop,\n        close: noop,\n        interact: noop,\n      });\n    };\n  }, []);\n\n  const side = assistant?.position ?? ChatPosition.RIGHT;\n  const position = { bottom: assistant?.spacing.bottom, [side]: assistant?.spacing.side };\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant);\n\n  return (\n    <Container withChat={isOpen} isHidden={isHidden} className={theme}>\n      {!!assistant && isStyleSheetResolved && (\n        <LauncherContainer style={position}>\n          <Launcher onClick={open} image={assistant.launcher} />\n        </LauncherContainer>\n      )}\n      <ChatContainer style={isMobile ? {} : position}>{children}</ChatContainer>\n    </Container>\n  );\n};\n\nexport default Object.assign(ChatWidget, {\n  Launcher,\n  Container,\n  ChatContainer,\n  LauncherContainer,\n});\n","import Chat from '@/components/Chat';\nimport { styled } from '@/styles';\n\nexport const ChatWindowContainer = styled('div', {\n  height: '100%',\n\n  [`& ${Chat.Container}`]: {\n    height: '100%',\n  },\n});\n","import { PostMessage } from '@/common';\n\nexport const sendMessage = (message: PostMessage.AnyMessage) => {\n  const encodedMessage = JSON.stringify(message);\n  window.postMessage(encodedMessage);\n  window.parent.postMessage(encodedMessage, '*');\n};\n","import '../../styles.css';\n\nimport React, { useCallback } from 'react';\nimport * as R from 'remeda';\nimport { match } from 'ts-pattern';\n\nimport { Assistant, ChatConfig, Listeners, PostMessage, SessionOptions, SessionStatus, useTheme } from '@/common';\nimport { Chat, SystemResponse, UserResponse } from '@/components';\nimport { RuntimeAPIProvider } from '@/contexts';\nimport { FeedbackName, useRuntime } from '@/hooks';\nimport { TurnType, UserTurnProps } from '@/types';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\n\nimport { ChatWindowContainer } from './styled';\nimport { sendMessage } from './utils';\n\nconst ChatWindow: React.FC<ChatConfig & { assistant: Assistant; session: SessionOptions }> = ({\n  assistant,\n  versionID,\n  verify,\n  user,\n  url,\n  session,\n}) => {\n  // emitters\n  const close = useCallback(() => sendMessage({ type: PostMessage.Type.CLOSE }), []);\n  const saveSession = useCallback((session: SessionOptions) => sendMessage({ type: PostMessage.Type.SAVE_SESSION, payload: session }), []);\n\n  const runtime = useRuntime({ versionID, verify, url, user, session, saveSession }, [verify.projectID]);\n\n  // listeners\n  Listeners.useListenMessage(PostMessage.Type.INTERACT, ({ payload }) => runtime.interact(payload));\n  Listeners.useListenMessage(PostMessage.Type.OPEN, async (): Promise<void> => {\n    if (runtime.isStatus(SessionStatus.IDLE)) {\n      await handleStart();\n    }\n  });\n\n  const handleStart = async (): Promise<void> => {\n    await runtime.launch();\n  };\n\n  const closeAndEnd = useCallback((): void => {\n    runtime.setStatus(SessionStatus.ENDED);\n    close();\n  }, []);\n\n  const theme = useTheme(assistant);\n\n  const getPreviousUserTurn = useCallback(\n    (turnIndex: number): UserTurnProps | null => {\n      const turn = runtime.session.turns[turnIndex - 1];\n      return turn?.type === TurnType.USER ? turn : null;\n    },\n    [runtime.session.turns]\n  );\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant);\n  if (!isStyleSheetResolved) return null;\n\n  return (\n    <RuntimeAPIProvider {...runtime}>\n      <ChatWindowContainer className={theme}>\n        <Chat\n          title={assistant.title}\n          description={assistant.description}\n          image={assistant.image}\n          avatar={assistant.avatar}\n          withWatermark={assistant.watermark}\n          startTime={runtime.session.startTime}\n          hasEnded={runtime.isStatus(SessionStatus.ENDED)}\n          isLoading={!runtime.session.turns.length}\n          onStart={handleStart}\n          onEnd={closeAndEnd}\n          onSend={runtime.reply}\n          onMinimize={close}\n        >\n          {runtime.session.turns.map((turn, turnIndex) =>\n            match(turn)\n              .with({ type: TurnType.USER }, ({ id, ...props }) => <UserResponse {...R.omit(props, ['type'])} key={id} />)\n              .with({ type: TurnType.SYSTEM }, ({ id, ...props }) => (\n                <SystemResponse\n                  key={id}\n                  {...R.omit(props, ['type'])}\n                  feedback={\n                    assistant.feedback\n                      ? {\n                          onClick: (feedback: FeedbackName) => {\n                            runtime.feedback(feedback, props.messages, getPreviousUserTurn(turnIndex));\n                          },\n                        }\n                      : undefined\n                  }\n                  avatar={assistant.avatar}\n                  isLast={turnIndex === runtime.session.turns.length - 1}\n                />\n              ))\n              .exhaustive()\n          )}\n          {runtime.indicator && <SystemResponse.Indicator avatar={assistant.avatar} />}\n        </Chat>\n      </ChatWindowContainer>\n    </RuntimeAPIProvider>\n  );\n};\n\nexport default Object.assign(ChatWindow, { sendMessage, Container: ChatWindowContainer });\n","import { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { useRef } from 'react';\n\nimport Avatar from '@/components/Avatar';\nimport Chat from '@/components/Chat';\nimport SystemResponse from '@/components/SystemResponse';\nimport { VF_ICON } from '@/fixtures';\nimport { ChatWidget } from '@/views';\n\nimport Carousel from '.';\n\nconst IMAGE = 'https://source.unsplash.com/featured/248x150';\nconst FIRST_CARD = {\n  title: 'First Card',\n  description: 'Lorem ipsum dolor sit amet',\n  image: IMAGE,\n  actions: [\n    { request: {} as any, name: 'First Button' },\n    { request: {} as any, name: 'Second Button' },\n    { request: {} as any, name: 'Third Button' },\n  ],\n};\nconst MULTIPLE_CARDS = [\n  FIRST_CARD,\n  {\n    title: 'Second Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!',\n    image: IMAGE,\n  },\n  {\n    title: 'Third Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit.',\n    actions: [\n      { request: {} as any, name: 'Fourth Button' },\n      { request: {} as any, name: 'Fifth Button' },\n    ],\n  },\n];\n\nexport default {\n  title: 'Components/Carousel',\n  component: Carousel,\n} as ComponentMeta<typeof Carousel>;\n\nconst Template: ComponentStory<typeof Carousel> = (args) => <Carousel {...args} />;\n\nexport const SingleCard = Template.bind({});\nSingleCard.args = {\n  cards: [FIRST_CARD],\n};\n\nexport const MultipleCards = Template.bind({});\nMultipleCards.args = {\n  cards: MULTIPLE_CARDS,\n};\n\nconst ControlsTemplate: ComponentStory<typeof Carousel> = (args) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <ChatWidget.ChatContainer>\n      <Chat.Dialog>\n        <SystemResponse.Controls ref={controlsRef} />\n        <SystemResponse.Container ref={containerRef} withImage scrollable>\n          <Avatar avatar={VF_ICON} />\n          <Carousel {...args} controlsRef={controlsRef} containerRef={containerRef} />\n        </SystemResponse.Container>\n      </Chat.Dialog>\n    </ChatWidget.ChatContainer>\n  );\n};\n\nexport const WithControls = ControlsTemplate.bind({});\nWithControls.args = {\n  cards: MULTIPLE_CARDS,\n};\n"],"names":["useTheme","assistant","theme","setTheme","useState","useEffect","createCustomTheme","addStyleSheetURL","url","link","load","resolve","reject","useResolveAssistantStyleSheet","isStyleSheetResolved","setStyleSheetResolved","error","CHAT_WIDTH","MAX_CHAT_HEIGHT","tag","tagFactory","ClassName","ChatContainer","styled","LauncherContainer","animateInStyles","animateOutStyles","Container","ChatWidget","children","chatAPI","sendMessage","isOpen","setOpen","isHidden","setHidden","isMobile","useMemo","window","matchMedia","matches","Listeners","PostMessage","CLOSE","OPEN","open","React","useCallback","type","close","isObject","Object","assign","hide","show","interact","action","INTERACT","payload","noop","side","position","ChatPosition","RIGHT","bottom","spacing","Launcher","launcher","_jsx","ChatWidget$1","ChatWindowContainer","Chat","message","encodedMessage","ChatWindow","versionID","verify","user","session","saveSession","SAVE_SESSION","runtime","useRuntime","projectID","isStatus","SessionStatus","IDLE","handleStart","launch","closeAndEnd","setStatus","ENDED","getPreviousUserTurn","turnIndex","turn","turns","TurnType","USER","RuntimeAPIProvider","title","description","image","avatar","watermark","startTime","length","reply","map","match","with","id","props","UserResponse","R","SYSTEM","SystemResponse","feedback","onClick","messages","undefined","exhaustive","indicator","IMAGE","FIRST_CARD","actions","request","name","MULTIPLE_CARDS","Carousel_story","component","Carousel","Template","args","SingleCard","bind","cards","MultipleCards","ControlsTemplate","containerRef","useRef","controlsRef","_jsxs","Avatar","VF_ICON","WithControls"],"mappings":"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"}