{"version":3,"file":"Carousel.story.345cc841.js","sources":["../../../../node_modules/remeda/dist/es/guards.js","../../src/hooks/useTheme.ts","../../src/components/Proactive/Close.tsx","../../src/components/Proactive/Message.tsx","../../src/components/Proactive/index.tsx","../../src/views/ChatWindow/styled.ts","../../src/views/ChatWindow/index.tsx","../../src/views/ChatWidget/styled.ts","../../src/views/ChatWidget/index.tsx","../../src/views/ChatWindow/ChatWindowStandaloneView.tsx","../../src/components/Carousel/Carousel.story.tsx"],"sourcesContent":["/**\n * A function that checks if the passed parameter is a string and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isString(data)\n * @returns true if the passed input is a string, false otherwise\n * @example\n *    R.isString('string') //=> true\n *    R.iString(1) //=> false\n * @category Guard\n */\nexport function isString(data) {\n    return typeof data === 'string';\n}\n/**\n * A function that checks if the passed parameter is a number and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isNumber(data)\n * @returns true if the passed input is a number, false otherwise\n * @example\n *    R.isNumber(1) //=> true\n *    R.isNumber('notANumber') //=> false\n * @category Guard\n */\nexport function isNumber(data) {\n    return typeof data === 'number' && !isNaN(data);\n}\n/**\n * A function that checks if the passed parameter is defined and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isDefined(data)\n * @returns true if the passed input is defined, false otherwise\n * @example\n *    R.isDefined('string') //=> true\n *    R.isDefined(null) //=> false\n *    R.isDefined(undefined) //=> false\n * @category Guard\n */\nexport function isDefined(data) {\n    return typeof data !== 'undefined' && data !== null;\n}\n/**\n * A function that checks if the passed parameter is a boolean and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isBoolean(data)\n * @returns true if the passed input is a boolean, false otherwise\n * @example\n *    R.isBoolean(true) //=> true\n *    R.isBoolean(false) //=> true\n *    R.isBoolean('somethingElse') //=> false\n * @category Guard\n */\nexport function isBoolean(data) {\n    return typeof data === 'boolean';\n}\n/**\n * A function that checks if the passed parameter is a Promise and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isPromise(data)\n * @returns true if the passed input is a Promise, false otherwise\n * @example\n *    R.isPromise(Promise.resolve(5)) //=> true\n *    R.isPromise(Promise.reject(5)) //=> true\n *    R.isPromise('somethingElse') //=> false\n * @category Guard\n */\nexport function isPromise(data) {\n    return data instanceof Promise;\n}\n/**\n * A function that checks if the passed parameter is an Array and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isArray(data)\n * @returns true if the passed input is an Array, false otherwise\n * @example\n *    R.isArray([5]) //=> true\n *    R.isArray([]) //=> true\n *    R.isArray('somethingElse') //=> false\n * @category Guard\n */\nexport function isArray(data) {\n    return Array.isArray(data);\n}\n/**\n * A function that checks if the passed parameter is of type Object and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isObject(data)\n * @returns true if the passed input is an Object, Promise, Date or Error, false otherwise\n * @example\n *    R.isObject({}) //=> true\n *    R.isObject(Promise.resolve(\"something\")) //=> true\n *    R.isObject(new Date()) //=> true\n *    R.isObject(new Error(\"error\")) //=> true\n *    R.isObject('somethingElse') //=> false\n * @category Guard\n */\nexport function isObject(data) {\n    return !!data && !Array.isArray(data) && typeof data === 'object';\n}\n/**\n * A function that checks if the passed parameter is a Function and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isFunction(data)\n * @returns true if the passed input is a Function, false otherwise\n * @example\n *    R.isFunction(() => {}) //=> true\n *    R.isFunction('somethingElse') //=> false\n * @category Guard\n */\nexport function isFunction(data) {\n    return typeof data === 'function';\n}\n/**\n * A function that checks if the passed parameter is Nil (null or undefined) and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isNil(data)\n * @returns true if the passed input is Nil (null or undefined), false otherwise\n * @example\n *    R.isNil(undefined) //=> true\n *    R.isNil(null) //=> true\n *    R.isNil('somethingElse') //=> false\n * @category Guard\n */\nexport function isNil(data) {\n    return data == null;\n}\n/**\n * A function that checks if the passed parameter is an Error and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isError(data)\n * @returns true if the passed input is an Error, false otherwise\n * @example\n *    R.isError(new Error('message')) //=> true\n *    R.isError('somethingElse') //=> false\n * @category Guard\n */\nexport function isError(data) {\n    return data instanceof Error;\n}\n/**\n * A function that checks if the passed parameter is a Date and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isDate(data)\n * @returns true if the passed input is a Date, false otherwise\n * @example\n *    R.isDate(new Date()) //=> true\n *    R.isDate('somethingElse') //=> false\n * @category Guard\n */\nexport function isDate(data) {\n    return data instanceof Date;\n}\n/**\n * A function that checks if the passed parameter is truthy and narrows its type accordingly\n * @param data the variable to check\n * @signature\n *    R.isTruthy(data)\n * @returns true if the passed input is truthy, false otherwise\n * @example\n *    R.isTruthy('somethingElse') //=> true\n *    R.isTruthy(null) //=> false\n *    R.isTruthy(undefined) //=> false\n *    R.isTruthy(false) //=> false\n *    R.isTruthy(0) //=> false\n *    R.isTruthy('') //=> false\n * @category Guard\n */\nexport function isTruthy(data) {\n    return !!data;\n}\nexport function isNot(predicate) {\n    return function (data) {\n        return !predicate(data);\n    };\n}\n","import { useEffect, useState } from 'react';\n\nimport { createCustomTheme } from '@/styles';\n\nimport { Assistant } from '../common/types';\n\nexport const useTheme = (assistant?: Assistant) => {\n  const [theme, setTheme] = useState('');\n  useEffect(() => {\n    if (assistant?.color) {\n      setTheme(createCustomTheme({ color: assistant.color }));\n    }\n  }, [assistant?.color]);\n\n  return theme;\n};\n","import React from 'react';\n\nimport Icon from '@/components/Icon';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nexport const tag = tagFactory(ClassName.PROACTIVE_CLOSE);\n\nexport const CloseContainer = styled(tag('div'), {\n  width: 32,\n  height: 32,\n  borderRadius: '$round',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  color: '#656D75',\n  cursor: 'pointer',\n  background: '$white',\n  boxShadow: '$surfaceZ1Light',\n\n  [`& ${Icon.Frame}`]: {\n    width: 10,\n    height: 10,\n  },\n\n  [`&:hover, &:active`]: {\n    color: '#2B3239',\n  },\n});\n\nconst Close: React.FC<React.ComponentProps<typeof CloseContainer>> = ({ ...props }) => (\n  <CloseContainer {...props}>\n    <Icon svg=\"closeV2\" />\n  </CloseContainer>\n);\n\nexport default Close;\n","import { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { styled } from '@/styles';\n\nexport const tag = tagFactory(ClassName.PROACTIVE_MESSAGE);\n\nexport const MessageContainer = styled(tag('div'), {\n  padding: '11px 16px 10px 16px',\n  maxWidth: 256,\n  color: '#1A1E23',\n  boxShadow: '$surfaceZ1Light',\n  borderRadius: '$2',\n  background: '$white',\n  typo: { size: 14 },\n});\n\nexport default MessageContainer;\n","import { Trace } from '@voiceflow/base-types';\nimport React from 'react';\nimport { match } from 'ts-pattern';\n\nimport { ChatPosition } from '@/common';\nimport { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { animationStyles, styled } from '@/styles';\n\nimport Close, { CloseContainer } from './Close';\nimport Message, { MessageContainer } from './Message';\n\nexport const tag = tagFactory(ClassName.PROACTIVE);\n\nexport const ProactiveMessageContainer = styled('div', {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: 8,\n  margin: '$4 0',\n  alignItems: 'inherit',\n\n  [`& ${MessageContainer}`]: {\n    ...animationStyles({ duration: 150, delay: 0 }),\n  },\n});\n\nexport const ProactiveContainer = styled(tag('div'), {\n  position: 'absolute',\n  bottom: '100%',\n\n  display: 'flex',\n  flexDirection: 'column',\n\n  [`& ${CloseContainer}`]: {\n    opacity: 0,\n  },\n\n  [`&:hover`]: {\n    [`& ${CloseContainer}`]: {\n      opacity: 1,\n    },\n  },\n});\n\n// variants: {\n//   mode: {\n//     bubble: { width: 256 },\n//     embedded: { width: '100%' },\n//   },\n// },\n// defaultVariants: {\n//   mode: 'bubble',\n// },\n\ninterface ProactiveQueueProps {\n  side: ChatPosition;\n  messages: Trace.AnyTrace[];\n}\n\nconst ProactiveQueue: React.FC<ProactiveQueueProps> = ({ side, messages }) => {\n  const [isClosed, setIsClosed] = React.useState(false);\n\n  const queue = React.useMemo(\n    () =>\n      messages.map((message, index) =>\n        match(message)\n          .with({ type: Trace.TraceType.TEXT }, ({ payload }) => <Message key={index}>{String(payload.message)}</Message>)\n          .otherwise(() => null)\n      ),\n    [messages]\n  );\n\n  React.useEffect(() => {\n    if (!queue.length) return;\n    setIsClosed(false);\n  }, [queue]);\n\n  if (isClosed || !queue.length) return null;\n\n  return (\n    <ProactiveContainer style={{ [side]: 0, alignItems: side === ChatPosition.LEFT ? 'start' : 'end' }}>\n      <Close onClick={() => setIsClosed(true)} />\n      <ProactiveMessageContainer>{queue}</ProactiveMessageContainer>\n    </ProactiveContainer>\n  );\n};\n\nexport default Object.assign(ProactiveQueue, {\n  Message,\n  Close,\n});\n","import Chat from '@/components/Chat';\nimport { styled } from '@/styles';\n\nexport const ChatWindowContainer = styled('div', {\n  height: '100%',\n\n  [`& ${Chat.Container}`]: {\n    height: '100%',\n  },\n});\n","import '../../styles.css';\n\nimport React, { useCallback, useContext } from 'react';\nimport * as R from 'remeda';\nimport { match } from 'ts-pattern';\n\nimport { SessionStatus } from '@/common';\nimport { Chat, SystemResponse, UserResponse } from '@/components';\nimport { RuntimeStateAPIContext, RuntimeStateContext } from '@/contexts/RuntimeContext';\nimport type { FeedbackName } from '@/contexts/RuntimeContext/useRuntimeAPI';\nimport { TurnType, UserTurnProps } from '@/types';\n\nimport { ChatWindowContainer } from './styled';\n\nexport interface ChatWindowProps {\n  className?: string;\n}\n\nconst ChatWindow: React.FC<ChatWindowProps> = ({ className }) => {\n  const runtime = useContext(RuntimeStateAPIContext);\n  const state = useContext(RuntimeStateContext);\n  const { assistant, config } = runtime;\n\n  // emitters\n  const closeAndEnd = useCallback((): void => {\n    runtime.setStatus(SessionStatus.ENDED);\n    runtime.close();\n  }, []);\n\n  const getPreviousUserTurn = useCallback(\n    (turnIndex: number): UserTurnProps | null => {\n      const turn = state.session.turns[turnIndex - 1];\n      return turn?.type === TurnType.USER ? turn : null;\n    },\n    [state.session.turns]\n  );\n\n  return (\n    <ChatWindowContainer className={className}>\n      <Chat\n        autostart={!!config.autostart}\n        title={assistant.title}\n        description={assistant.description}\n        image={assistant.image}\n        avatar={assistant.avatar}\n        withWatermark={assistant.watermark}\n        startTime={state.session.startTime}\n        hasEnded={runtime.isStatus(SessionStatus.ENDED)}\n        isLoading={runtime.isStatus(SessionStatus.IDLE) && state.session.turns.length === 0 && state.autostart}\n        onStart={runtime.launch}\n        onEnd={closeAndEnd}\n        onSend={runtime.reply}\n        onMinimize={runtime.close}\n      >\n        {state.session.turns.map((turn, turnIndex) =>\n          match(turn)\n            .with({ type: TurnType.USER }, ({ id, ...props }) => <UserResponse {...R.omit(props, ['type'])} key={id} />)\n            .with({ type: TurnType.SYSTEM }, ({ id, ...props }) => (\n              <SystemResponse\n                key={id}\n                {...R.omit(props, ['type'])}\n                feedback={\n                  assistant.feedback\n                    ? {\n                        onClick: (feedback: FeedbackName) => {\n                          runtime.feedback(feedback, props.messages, getPreviousUserTurn(turnIndex));\n                        },\n                      }\n                    : undefined\n                }\n                avatar={assistant.avatar}\n                isLast={turnIndex === state.session.turns.length - 1}\n              />\n            ))\n            .exhaustive()\n        )}\n        {state.indicator && <SystemResponse.Indicator avatar={assistant.avatar} />}\n      </Chat>\n    </ChatWindowContainer>\n  );\n};\n\nexport default Object.assign(ChatWindow, { Container: ChatWindowContainer });\n","import { ClassName } from '@/constants';\nimport { tagFactory } from '@/hocs';\nimport { CSS, styled } from '@/styles';\n\nconst CHAT_WIDTH = 380;\nconst MAX_CHAT_HEIGHT = 800;\n\nconst tag = tagFactory(ClassName.WIDGET);\n\nexport const ChatContainer = styled(tag('div', 'chat'), {\n  width: CHAT_WIDTH,\n  overflow: 'hidden',\n  borderRadius: '$2',\n  boxShadow: '0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4',\n  height: '90%',\n  maxHeight: MAX_CHAT_HEIGHT,\n\n  '@mobile': {\n    position: 'fixed',\n    height: 'unset',\n    maxHeight: 'unset',\n    width: 'unset',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    borderRadius: 0,\n    boxShadow: 'none',\n  },\n});\n\nexport const LauncherContainer = styled(tag('div', 'launcher'), {});\n\nconst animateInStyles: CSS = {\n  opacity: 1,\n  pointerEvents: 'auto',\n  transform: 'translateY(0%)',\n  transition: 'transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear',\n};\n\nconst animateOutStyles: CSS = {\n  opacity: 0,\n  pointerEvents: 'none',\n  transform: 'translateY(100%)',\n  transition: 'transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear',\n};\n\nexport const Container = styled(tag('div'), {\n  position: 'fixed',\n  inset: 0,\n  '-webkit-font-smoothing': 'antialiased',\n  '-moz-osx-font-smoothing': 'grayscale',\n  pointerEvents: 'none',\n  zIndex: 10000,\n\n  [`\n    & > ${LauncherContainer},\n    & > ${ChatContainer}\n  `]: {\n    position: 'absolute',\n  },\n\n  variants: {\n    withChat: {\n      true: {\n        [`& > ${ChatContainer}`]: {\n          ...animateInStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateOutStyles,\n        },\n      },\n      false: {\n        [`& > ${ChatContainer}`]: {\n          ...animateOutStyles,\n        },\n        [`& > ${LauncherContainer}`]: {\n          ...animateInStyles,\n        },\n      },\n    },\n    isHidden: {\n      true: {\n        display: 'none',\n      },\n    },\n  },\n});\n","import { Trace } from '@voiceflow/base-types';\nimport React, { useContext, useEffect, useMemo, useState } from 'react';\n\nimport { ChatPosition, isObject } from '@/common';\nimport Launcher from '@/components/Launcher';\nimport Proactive from '@/components/Proactive';\nimport { RuntimeStateAPIContext, RuntimeStateContext } from '@/contexts';\nimport { useTheme } from '@/hooks';\nimport { noop } from '@/utils/functional';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\nimport ChatWindow from '@/views/ChatWindow';\n\nimport { ChatContainer, Container, LauncherContainer } from './styled';\nimport { ChatAPI } from './types';\n\ninterface ChatWidgetProps extends React.PropsWithChildren {\n  chatAPI?: ChatAPI | undefined;\n  ready?: () => void;\n}\n\nconst ChatWidget: React.FC<ChatWidgetProps> = ({ chatAPI, ready }) => {\n  const { assistant, open, close, interact } = useContext(RuntimeStateAPIContext);\n  const { isOpen, shadowRoot } = useContext(RuntimeStateContext);\n\n  /** initialization */\n  const [isHidden, setHidden] = useState(false);\n  const [proactiveMessages, setProactiveMessages] = useState<Trace.AnyTrace[]>([]);\n  const isMobile = useMemo(() => window.matchMedia('(max-width: 768px)').matches, []);\n\n  const theme = useTheme(assistant);\n\n  /** initialize window */\n  useEffect(() => {\n    if (!isObject(chatAPI)) return undefined;\n\n    Object.assign(chatAPI, {\n      open,\n      close,\n      hide: () => setHidden(true),\n      show: () => setHidden(false),\n      interact,\n      proactive: {\n        clear: () => setProactiveMessages([]),\n        push: (...messages: Trace.AnyTrace[]) => setProactiveMessages((prev) => [...prev, ...messages]),\n      },\n    });\n\n    ready?.();\n\n    return () => {\n      Object.assign(chatAPI, {\n        open: noop,\n        hide: noop,\n        show: noop,\n        close: noop,\n        interact: noop,\n        proactive: {\n          clear: noop,\n          push: noop,\n        },\n      });\n    };\n  }, []);\n\n  const side = assistant?.position ?? ChatPosition.RIGHT;\n  const position = { bottom: assistant?.spacing.bottom, [side]: assistant?.spacing.side };\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant, shadowRoot);\n\n  if (!isStyleSheetResolved) return null;\n\n  return (\n    <Container withChat={isOpen} isHidden={isHidden} className={theme}>\n      {!!assistant && (\n        <LauncherContainer style={position}>\n          <Proactive side={side} messages={proactiveMessages} />\n          <Launcher onClick={open} image={assistant.launcher} />\n        </LauncherContainer>\n      )}\n      <ChatContainer style={isMobile ? {} : position}>\n        <ChatWindow />\n      </ChatContainer>\n    </Container>\n  );\n};\n\nexport default Object.assign(ChatWidget, {\n  Launcher,\n  Container,\n  ChatContainer,\n  LauncherContainer,\n});\n","import { useContext, useEffect } from 'react';\n\nimport { isObject } from '@/common/utils';\nimport { RuntimeStateAPIContext, RuntimeStateContext } from '@/contexts';\nimport { useTheme } from '@/hooks';\nimport { noop } from '@/utils/functional';\nimport { useResolveAssistantStyleSheet } from '@/utils/stylesheet';\n\nimport { ChatAPI } from '../ChatWidget/types';\nimport ChatWindow from '.';\n\ninterface ChatWindowStandaloneViewProps extends React.PropsWithChildren {\n  chatAPI?: ChatAPI | undefined;\n  ready?: () => void;\n}\n\nconst ChatWindowStandaloneView: React.FC<ChatWindowStandaloneViewProps> = ({ chatAPI, ready }) => {\n  const { shadowRoot } = useContext(RuntimeStateContext);\n  const { assistant, interact } = useContext(RuntimeStateAPIContext);\n  const theme = useTheme(assistant);\n\n  const isStyleSheetResolved = useResolveAssistantStyleSheet(assistant, shadowRoot);\n\n  useEffect(() => {\n    if (!isObject(chatAPI)) return undefined;\n    console.info('Methods open, close, hide, show, proactive.clear, proactive.push have no effect in this mode.');\n\n    Object.assign(chatAPI, {\n      open: noop,\n      close: noop,\n      hide: noop,\n      show: noop,\n      interact,\n      proactive: {\n        clear: noop, // () => setProactiveMessages([]),\n        push: noop, // (...messages: Trace.AnyTrace[]) => setProactiveMessages((prev) => [...prev, ...messages]),\n      },\n    });\n\n    ready?.();\n\n    return () => {\n      Object.assign(chatAPI, {\n        open: noop,\n        hide: noop,\n        show: noop,\n        close: noop,\n        interact: noop,\n        proactive: {\n          clear: noop,\n          push: noop,\n        },\n      });\n    };\n  }, []);\n\n  if (!isStyleSheetResolved) return null;\n  return <ChatWindow className={theme} />;\n};\n\nexport default ChatWindowStandaloneView;\n","import { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { useRef } from 'react';\n\nimport Avatar from '@/components/Avatar';\nimport Chat from '@/components/Chat';\nimport SystemResponse from '@/components/SystemResponse';\nimport { VF_ICON } from '@/fixtures';\nimport { ChatWidget } from '@/views';\n\nimport Carousel from '.';\n\nconst IMAGE = 'https://source.unsplash.com/featured/248x150';\nconst FIRST_CARD = {\n  title: 'First Card',\n  description: 'Lorem ipsum dolor sit amet',\n  image: IMAGE,\n  actions: [\n    { request: {} as any, name: 'First Button' },\n    { request: {} as any, name: 'Second Button' },\n    { request: {} as any, name: 'Third Button' },\n  ],\n};\nconst MULTIPLE_CARDS = [\n  FIRST_CARD,\n  {\n    title: 'Second Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!',\n    image: IMAGE,\n  },\n  {\n    title: 'Third Card',\n    description: 'Lorem ipsum dolor sit amet consectetur adipisicing elit.',\n    actions: [\n      { request: {} as any, name: 'Fourth Button' },\n      { request: {} as any, name: 'Fifth Button' },\n    ],\n  },\n];\n\nexport default {\n  title: 'Components/Carousel',\n  component: Carousel,\n} as ComponentMeta<typeof Carousel>;\n\nconst Template: ComponentStory<typeof Carousel> = (args) => <Carousel {...args} />;\n\nexport const SingleCard = Template.bind({});\nSingleCard.args = {\n  cards: [FIRST_CARD],\n};\n\nexport const MultipleCards = Template.bind({});\nMultipleCards.args = {\n  cards: MULTIPLE_CARDS,\n};\n\nconst ControlsTemplate: ComponentStory<typeof Carousel> = (args) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const controlsRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <ChatWidget.ChatContainer>\n      <Chat.Dialog>\n        <SystemResponse.Controls ref={controlsRef} />\n        <SystemResponse.Container ref={containerRef} withImage scrollable>\n          <Avatar avatar={VF_ICON} />\n          <Carousel {...args} controlsRef={controlsRef} containerRef={containerRef} />\n        </SystemResponse.Container>\n      </Chat.Dialog>\n    </ChatWidget.ChatContainer>\n  );\n};\n\nexport const WithControls = ControlsTemplate.bind({});\nWithControls.args = {\n  cards: MULTIPLE_CARDS,\n};\n"],"names":["isObject","data","useTheme","assistant","theme","setTheme","useState","useEffect","createCustomTheme","tag","tagFactory","ClassName","CloseContainer","styled","Icon","Close","props","_jsx","MessageContainer","ProactiveMessageContainer","animationStyles","ProactiveContainer","ProactiveQueue","side","isClosed","setIsClosed","React","queue","messages","message","index","match","Trace.TraceType","TEXT","payload","_jsxs","ChatPosition","Proactive","Message","ChatWindowContainer","Chat","ChatWindow","className","runtime","useContext","RuntimeStateAPIContext","state","RuntimeStateContext","config","closeAndEnd","useCallback","setStatus","SessionStatus","ENDED","close","getPreviousUserTurn","turnIndex","turn","session","turns","type","TurnType","USER","autostart","title","description","image","avatar","watermark","startTime","isStatus","IDLE","length","launch","reply","map","with","id","UserResponse","R","SYSTEM","SystemResponse","feedback","onClick","undefined","exhaustive","indicator","ChatWindow$1","Object","assign","Container","CHAT_WIDTH","MAX_CHAT_HEIGHT","ChatContainer","LauncherContainer","animateInStyles","animateOutStyles","ChatWidget","chatAPI","ready","open","interact","isOpen","shadowRoot","isHidden","setHidden","proactiveMessages","setProactiveMessages","isMobile","useMemo","window","matchMedia","matches","hide","show","proactive","clear","push","prev","noop","position","RIGHT","bottom","spacing","useResolveAssistantStyleSheet","Launcher","launcher","ChatWidget$1","ChatWindowStandaloneView","isStyleSheetResolved","console","IMAGE","FIRST_CARD","actions","request","name","MULTIPLE_CARDS","Carousel_story","component","Carousel","Template","args","SingleCard","bind","cards","MultipleCards","ControlsTemplate","containerRef","useRef","controlsRef","Avatar","VF_ICON","WithControls"],"mappings":"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"}