import{r,R as A,a as S,j as n}from"./jsx-runtime.780ddebc.js";import{A as z}from"./index.8903581c.js";import{u as y,T as l,i as B,c as G,C as I,a as V,S as R,b as O,K as Y,U as J,o as M,d as x,e as L}from"./index.b132e263.js";import{V as K}from"./fixtures.e9667a2d.js";import{b as X,s as E}from"./theme.d12fa20e.js";import"./index.da8f8e4a.js";import{L as D}from"./index.938d44b2.js";import"./index.7b2b6a30.js";import"./index.0c226510.js";import{c as Q}from"./index.c13b0950.js";import"./index.0d19bdf0.js";import"./index.7498fb58.js";import"./index.a0c94f10.js";import"./index.58b28d0f.js";import"./index.78f7ffa5.js";import"./index.7fb4b231.js";import"./index.2d37a847.js";import"./index.95306f84.js";import"./iframe.8884f406.js";import"./is-plain-object.ed97bcae.js";import"./index.1645f0bf.js";import"./variants.8331b181.js";import"./top-caret.124d72db.js";const _=e=>{const[i,s]=r.exports.useState("");return r.exports.useEffect(()=>{e!=null&&e.color&&s(X({color:e.color}))},[e==null?void 0:e.color]),i},Z=380,ee=800,p=E("div",{width:Z,overflow:"hidden",borderRadius:"$2",boxShadow:"0 2px 48px rgba(19,33,68,0.16), 0 0 0 1px $shadow4",height:"90%",maxHeight:ee,"@mobile":{position:"fixed",height:"unset",maxHeight:"unset",width:"unset",left:0,right:0,top:0,bottom:0,borderRadius:0,boxShadow:"none"}}),d=E("div",{}),N={opacity:1,pointerEvents:"auto",transform:"translateY(0%)",transition:"transform 300ms cubic-bezier(0, 0.95, 0.1, 1), opacity 150ms linear"},H={opacity:0,pointerEvents:"none",transform:"translateY(100%)",transition:"transform 300ms cubic-bezier(0.85, 0, 0.6, 1), opacity 150ms linear"},$=E("div",{position:"fixed",inset:0,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",pointerEvents:"none",zIndex:1e4,[`
    & > ${d},
    & > ${p}
  `]:{position:"absolute"},variants:{withChat:{true:{[`& > ${p}`]:{...N},[`& > ${d}`]:{...H}},false:{[`& > ${p}`]:{...H},[`& > ${d}`]:{...N}}},isHidden:{true:{display:"none"}}}}),te=({children:e,chatAPI:i,sendMessage:s,assistant:o})=>{var c;const[w,u]=r.exports.useState(!1),[h,C]=r.exports.useState(!1),t=r.exports.useMemo(()=>window.matchMedia("(max-width: 768px)").matches,[]),f=_(o);y(l.CLOSE,()=>u(!1)),y(l.OPEN,()=>u(!0));const g=A.useCallback(()=>s({type:l.OPEN}),[]),T=A.useCallback(()=>s({type:l.CLOSE}),[]);r.exports.useEffect(()=>{!B(i)||Object.assign(i,{open:g,close:T,hide:()=>C(!0),show:()=>C(!1),interact:m=>s({type:l.INTERACT,payload:m})})},[]);const v=(c=o==null?void 0:o.position)!=null?c:G.ChatPosition.RIGHT,a={bottom:o==null?void 0:o.spacing.bottom,[v]:o==null?void 0:o.spacing.side};return S($,{withChat:w,isHidden:h,className:f,children:[!!o&&n(d,{style:a,children:n(D,{onClick:g,image:o.launcher})}),n(p,{style:t?{}:a,children:e})]})},oe=Object.assign(te,{Launcher:D,Container:$,ChatContainer:p,LauncherContainer:d});const j=E("div",{height:"100%",[`& ${I.Container}`]:{height:"100%"}}),k=e=>{const i=JSON.stringify(e);window.postMessage(i),window.parent.postMessage(i,"*")},re=({assistant:e,versionID:i,verify:s,user:o,url:w,session:u})=>{const h=r.exports.useCallback(()=>k({type:l.CLOSE}),[]),C=r.exports.useCallback(a=>k({type:l.SAVE_SESSION,payload:a}),[]),t=V({versionID:i,verify:s,url:w,user:o,session:u,saveSession:C},[s.projectID]);y(l.INTERACT,({payload:a})=>t.interact(a)),y(l.OPEN,async()=>{t.isStatus(R.IDLE)&&await f()});const f=async()=>{await t.launch()},g=r.exports.useCallback(()=>{t.setStatus(R.ENDED),h()},[]),T=_(e),v=r.exports.useCallback(a=>{const c=t.session.turns[a-1];return(c==null?void 0:c.type)===O.USER?c:null},[t.session.turns]);return n(Q,{...t,children:n(j,{className:T,children:S(I,{title:e.title,description:e.description,image:e.image,avatar:e.avatar,withWatermark:e.watermark,startTime:t.session.startTime,hasEnded:t.isStatus(R.ENDED),isLoading:!t.session.turns.length,onStart:f,onEnd:g,onSend:t.reply,onMinimize:h,children:[t.session.turns.map((a,c)=>Y(a).with({type:O.USER},({id:m,...b})=>r.exports.createElement(J,{...M(b,["type"]),key:m})).with({type:O.SYSTEM},({id:m,...b})=>n(x,{...M(b,["type"]),feedback:e.feedback?{onClick:U=>{t.feedback(U,b.messages,v(c))}}:void 0,avatar:e.avatar,isLast:c===t.session.turns.length-1},m)).exhaustive()),t.indicator&&n(x.Indicator,{avatar:e.avatar})]})})})};Object.assign(re,{sendMessage:k,Container:j});const P="https://source.unsplash.com/featured/248x150",W={title:"First Card",description:"Lorem ipsum dolor sit amet",image:P,actions:[{request:{},name:"First Button"},{request:{},name:"Second Button"},{request:{},name:"Third Button"}]},q=[W,{title:"Second Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem voluptas perspiciatis est quis dolores!",image:P},{title:"Third Card",description:"Lorem ipsum dolor sit amet consectetur adipisicing elit.",actions:[{request:{},name:"Fourth Button"},{request:{},name:"Fifth Button"}]}],Ae={title:"Components/Carousel",component:L},F=e=>n(L,{...e}),ie=F.bind({});ie.args={cards:[W]};const ne=F.bind({});ne.args={cards:q};const se=e=>{const i=r.exports.useRef(null),s=r.exports.useRef(null);return n(oe.ChatContainer,{children:S(I.Dialog,{children:[n(x.Controls,{ref:s}),S(x.Container,{ref:i,withImage:!0,scrollable:!0,children:[n(z,{avatar:K}),n(L,{...e,controlsRef:s,containerRef:i})]})]})})},ae=se.bind({});ae.args={cards:q};export{ne as MultipleCards,ie as SingleCard,ae as WithControls,Ae as default};
//# sourceMappingURL=Carousel.story.1cc30909.js.map
